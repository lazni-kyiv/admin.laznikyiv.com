import{A as Gt}from"./AdminView-zm1vYfoj.js";import{m as ht,D as $t,b as M,n as nt,c as l,o as n,f as t,z as y,t as v,w as P,h as w,v as j,F as C,E as $,q as S,a as H,e as lt,l as xt,H as Xt,I as vt,d as Kt,A as It,x as Yt,j as Wt,g as kt}from"./index-Djdg4anx.js";import{t as mt}from"./toastr-CY63SwY8.js";/* empty css                   */import{_ as bt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./_commonjsHelpers-CqkleIqs.js";const Qt={class:"guest-info__item guest-card"},te={class:"guest-card__actions"},ee={key:0,onclick:"edit.showModal()",class:"guest-edit-button"},se={class:"guest-card__header"},oe=["src"],ne=["src"],le=["src"],ie={class:"col"},ae={class:"guest-name"},ue={class:"guest-id"},de={class:"guest_pi-list"},re={class:"pi-item"},ce={class:"pi-item"},pe={class:"pi-item"},ve={key:0,class:"guest-socials"},me={class:"guest-socials__grid"},ge={key:0,class:"socials-item"},ke=["href"],he={key:1,class:"socials-item"},be=["href"],fe={id:"edit",class:"modal"},ye={class:"form-input"},we={class:"form-input"},_e={style:{width:"100%","text-align":"end"}},Ce={class:"modal-action"},$e={id:"history",class:"modal"},xe={class:"modal-box"},De={class:"guest-history"},Se={class:"history-item"},je={class:"history-item__body"},Me={class:"history-item__footer"},Le={class:"modal-action"},Be={__name:"GuestInfo",props:{guest:{type:Object},auth:{type:String,default:null}},emits:["update"],setup(G,{emit:x}){const{user:_}=$t(),q=ht(()=>{var k;return(k=_.value)!=null&&k.teams?_.value.teams.some(a=>{var z;try{const V=typeof a.prefs=="string"?JSON.parse(a.prefs):a.prefs;return(z=V==null?void 0:V.guests)==null?void 0:z.includes("update")}catch{return!1}}):!1}),m=G,L=M({});nt(()=>m.guest,k=>{L.value={...k}},{immediate:!0});const T=x;function h(){lt.guests.update(m.guest.$id,{alias:L.value.alias,description:L.value.description}).then(k=>{mt.success("Гостя оновлено"),T("update",k.guest),L.value=k.guest})}function R(k){const a=k==null?void 0:k.split("T")[0].split("-").reverse().map(V=>V.length>2?V.slice(2,4):V).join("."),z=k==null?void 0:k.split("T")[1].split(".")[0];return[a,z].join(" ")}const i=M([]);function it(){fetch("https://api.laznikyiv.com/v2/lklg/guests.log").then(k=>k.text()).then(k=>{const a=k.trim().split(`
`).map(V=>V.replace(/,$/,"")).filter(V=>V.length>0),z=JSON.parse(`[${a.join(",")}]`).reverse();i.value=z.filter(V=>V.guest_id==m.guest.$id),document.getElementById("history").showModal()})}function at(){document.getElementById("history").close()}return(k,a)=>{var z,V,J,ut,X,Y,W,Q,tt,dt,g,Z,K,rt,ct,F;return n(),l("div",Qt,[t("div",te,[q.value?(n(),l("button",ee,a[6]||(a[6]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",class:"injected-svg","data-src":"https://cdn.hugeicons.com/icons/edit-03-solid-rounded.svg?v=2.0","xmlns:xlink":"http://www.w3.org/1999/xlink",role:"img"},[t("path",{d:"M18.799 3.0499C17.7324 1.98335 16.0032 1.98337 14.9366 3.04994L13.5236 4.46296L19.537 10.4763L20.9501 9.06321C22.0167 7.99665 22.0166 6.26746 20.9501 5.20092L18.799 3.0499Z",fill:"white"}),t("path",{d:"M18.4764 11.537L12.463 5.52363L4.35808 13.6286C3.66361 14.3231 3.20349 15.2172 3.04202 16.1859L2.26021 20.8767C2.22039 21.1156 2.29841 21.3591 2.46968 21.5303C2.64095 21.7016 2.88439 21.7796 3.12331 21.7398L7.81417 20.958C8.78294 20.7965 9.67706 20.3364 10.3715 19.642L18.4764 11.537Z",fill:"white"})],-1)]))):y("",!0),t("button",{onClick:a[0]||(a[0]=D=>it())},a[7]||(a[7]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",class:"injected-svg","data-src":"https://cdn.hugeicons.com/icons/clock-02-stroke-rounded.svg?v=1.0.1","xmlns:xlink":"http://www.w3.org/1999/xlink",role:"img",color:"#ffffff"},[t("path",{d:"M5.04798 8.60657L2.53784 8.45376C4.33712 3.70477 9.503 0.999914 14.5396 2.34474C19.904 3.77711 23.0904 9.26107 21.6565 14.5935C20.2227 19.926 14.7116 23.0876 9.3472 21.6553C5.36419 20.5917 2.58192 17.2946 2 13.4844",stroke:"#ffffff","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),t("path",{d:"M12 8V12L14 14",stroke:"#ffffff","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]))]),t("div",se,[((z=m.guest)==null?void 0:z.b)==="t"?(n(),l("img",{key:0,class:"guest-card__header__avatar",src:`https://ui-avatars.com/api/?name=${m.guest.alias}/&background=ccc&color=grey`},null,8,oe)):((V=m.guest)==null?void 0:V.b)==="p"?(n(),l("img",{key:1,class:"guest-card__header__avatar",src:`https://ui-avatars.com/api/?name=${(J=m.guest)==null?void 0:J.alias}/&background=E1B33F75&color=daa520`},null,8,ne)):(n(),l("img",{key:2,class:"guest-card__header__avatar",src:`https://ui-avatars.com/api/?name=${(ut=m.guest)==null?void 0:ut.alias}/&background=3D90864A&color=1d464`},null,8,le)),t("div",ie,[t("h4",ae,v((X=m.guest)==null?void 0:X.alias),1),t("span",ue,v((Y=m.guest)==null?void 0:Y.$id),1)])]),t("div",de,[t("div",re,[a[8]||(a[8]=t("span",null,"Дата створення",-1)),t("p",null,v(R((W=m.guest)==null?void 0:W.$createdAt)),1)]),t("div",ce,[a[9]||(a[9]=t("span",null,"Востаннє оновлено",-1)),t("p",null,v(R((Q=m.guest)==null?void 0:Q.$updatedAt)),1)]),t("div",pe,[a[10]||(a[10]=t("span",null,"Коментар",-1)),t("p",null,v((tt=m.guest)!=null&&tt.description?(dt=m.guest)==null?void 0:dt.description:"-"),1)]),(g=m.guest)!=null&&g.i||(Z=m.guest)!=null&&Z.tg?(n(),l("div",ve,[a[13]||(a[13]=t("hr",null,null,-1)),t("div",me,[m.guest.i?(n(),l("div",ge,[a[11]||(a[11]=t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",class:"injected-svg","data-src":"https://cdn.hugeicons.com/icons/instagram-stroke-rounded.svg?v=3.0","xmlns:xlink":"http://www.w3.org/1999/xlink",role:"img",color:"#000000"},[t("path",{d:"M2.5 12C2.5 7.52166 2.5 5.28249 3.89124 3.89124C5.28249 2.5 7.52166 2.5 12 2.5C16.4783 2.5 18.7175 2.5 20.1088 3.89124C21.5 5.28249 21.5 7.52166 21.5 12C21.5 16.4783 21.5 18.7175 20.1088 20.1088C18.7175 21.5 16.4783 21.5 12 21.5C7.52166 21.5 5.28249 21.5 3.89124 20.1088C2.5 18.7175 2.5 16.4783 2.5 12Z",stroke:"#000000","stroke-width":"1.5","stroke-linejoin":"round"}),t("path",{d:"M16.5 12C16.5 14.4853 14.4853 16.5 12 16.5C9.51472 16.5 7.5 14.4853 7.5 12C7.5 9.51472 9.51472 7.5 12 7.5C14.4853 7.5 16.5 9.51472 16.5 12Z",stroke:"#000000","stroke-width":"1.5"}),t("path",{d:"M17.5078 6.5L17.4988 6.5",stroke:"#000000","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),t("a",{href:`https://instagram.com/${(K=m.guest)==null?void 0:K.i}`,target:"_blank"},v(m.guest.i),9,ke)])):y("",!0),m.guest.tg?(n(),l("div",he,[a[12]||(a[12]=t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",class:"injected-svg","data-src":"https://cdn.hugeicons.com/icons/telegram-stroke-rounded.svg?v=3.0","xmlns:xlink":"http://www.w3.org/1999/xlink",role:"img",color:"#000000"},[t("path",{d:"M11.9854 15.4083L15.2268 19.0936C16.4277 20.4589 17.0282 21.1416 17.6567 20.9754C18.2852 20.8092 18.5008 19.9108 18.9318 18.1138L21.3229 8.1459C21.9868 5.37832 22.3187 3.99454 21.5808 3.312C20.843 2.62947 19.564 3.13725 17.0061 4.15282L5.13876 8.86449C3.09293 9.67674 2.07001 10.0829 2.00507 10.7808C1.99842 10.8522 1.99831 10.9241 2.00474 10.9955C2.06754 11.6937 3.08921 12.1033 5.13255 12.9223C6.05838 13.2934 6.5213 13.479 6.8532 13.8344C6.89052 13.8743 6.9264 13.9157 6.96078 13.9584C7.26658 14.3384 7.39709 14.8371 7.65808 15.8344L8.14653 17.701C8.4005 18.6715 8.52749 19.1568 8.86008 19.223C9.19267 19.2891 9.48225 18.8867 10.0614 18.0819L11.9854 15.4083ZM11.9854 15.4083L11.6676 15.0771C11.3059 14.7001 11.1251 14.5117 11.1251 14.2775C11.1251 14.0433 11.3059 13.8548 11.6676 13.4778L15.2406 9.75409",stroke:"#000000","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),t("a",{href:`https://t.me/${(rt=m.guest)==null?void 0:rt.tg}`,target:"_blank"},v(m.guest.tg),9,be)])):y("",!0)])])):y("",!0)]),t("dialog",fe,[m.guest?(n(),l("form",{key:0,class:"modal-box",onSubmit:a[4]||(a[4]=P(D=>h(),["prevent"]))},[a[17]||(a[17]=t("h3",{class:"text-lg font-bold"},"Редагувати",-1)),t("div",ye,[a[14]||(a[14]=t("label",{for:""},"Ім'я",-1)),w(t("input",{type:"text","onUpdate:modelValue":a[1]||(a[1]=D=>L.value.alias=D),minlength:"1",required:""},null,512),[[j,L.value.alias]])]),t("div",we,[a[15]||(a[15]=t("label",{for:""},"Коментар",-1)),w(t("textarea",{style:{height:"8rem"},type:"text",maxlength:"100","onUpdate:modelValue":a[2]||(a[2]=D=>L.value.description=D),minlength:"1"},null,512),[[j,L.value.description]]),t("div",_e,[t("small",null,v((F=(ct=L.value)==null?void 0:ct.description)==null?void 0:F.length)+"/100",1)])]),t("div",Ce,[t("button",{class:"secondary",onClick:a[3]||(a[3]=P(()=>{},["prevent"])),onclick:"edit.close()"},"Скасувати"),a[16]||(a[16]=t("button",{type:"submit"},"Зберегти",-1))])],32)):y("",!0)]),t("dialog",$e,[t("form",xe,[a[24]||(a[24]=t("h3",{style:{"margin-bottom":"1rem"}},"Історія змін",-1)),t("div",De,[(n(!0),l(C,null,$(i.value,D=>(n(),l("div",Se,[t("div",{class:S(`history-item__header ${D.event}`)},[t("span",null,v(D.event),1),t("p",null,v(D.timestamp.split("T")[0].split("-").reverse().map(et=>et.length==4?et.slice(2,4):et).join("."))+" "+v(D.timestamp.split("T")[1].split(":").slice(0,2).join(":")),1)],2),t("div",je,[t("span",null,[a[18]||(a[18]=H(" Ім'я : ")),t("b",null,v(D.extra.after.alias),1)]),t("span",null,[a[19]||(a[19]=H(" Коментар : ")),t("b",null,v(D.extra.after.description),1)]),t("span",null,[a[20]||(a[20]=H(" ПІБ : ")),t("b",null,v(D.extra.after.name),1)]),t("span",null,[a[21]||(a[21]=H(" Дата народження : ")),t("b",null,v(D.extra.after.birthday),1)]),t("span",null,[a[22]||(a[22]=H(" Номер телефону : ")),t("b",null,v(D.extra.after.phone),1)]),t("span",null,[a[23]||(a[23]=H(" Документ : ")),t("b",null,v(D.extra.after.document),1)])]),t("div",Me,v(D.email),1)]))),256))]),t("div",Le,[t("button",{class:"secondary",onClick:a[5]||(a[5]=P(D=>at(),["prevent"]))},"Закрити")])])])])}}},Ve=bt(Be,[["__scopeId","data-v-aa8056a4"]]),Ue={class:"guest-info__item guest-card"},Te=["disabled"],Ee={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none"},qe=["fill"],ze=["fill"],Oe={key:1,class:"guest_pi-list"},He={class:"pi-item"},Ne={class:"pi-item"},Ae={class:"pi-item"},Re={class:"pi-item"},Je={key:2,class:"guest_pi-list no-data"},Ze={__name:"GuestPersonalInfo",props:{guest:Object,auth:String},setup(G){const x=G;M({...x.guest}),M("");const _=M(null);return(q,m)=>{var L,T,h,R;return n(),l("div",Ue,[["dev"].includes(x.auth)?(n(),l("button",{key:0,disabled:q.placeholder,onClick:m[0]||(m[0]=i=>_.value.showModal()),class:"guest-edit-button"},[(n(),l("svg",Ee,[t("path",{d:"M18.799 3.0499C17.7324 1.98335 16.0032 1.98337 14.9366 3.04994L13.5236 4.46296L19.537 10.4763L20.9501 9.06321C22.0167 7.99665 22.0166 6.26746 20.9501 5.20092L18.799 3.0499Z",fill:q.placeholder?"grey":"white"},null,8,qe),t("path",{d:"M18.4764 11.537L12.463 5.52363L4.35808 13.6286C3.66361 14.3231 3.20349 15.2172 3.04202 16.1859L2.26021 20.8767C2.22039 21.1156 2.29841 21.3591 2.46968 21.5303C2.64095 21.7016 2.88439 21.7796 3.12331 21.7398L7.81417 20.958C8.78294 20.7965 9.67706 20.3364 10.3715 19.642L18.4764 11.537Z",fill:q.placeholder?"grey":"white"},null,8,ze)]))],8,Te)):y("",!0),m[6]||(m[6]=t("h3",null,"Особиста інформація",-1)),x.guest&&(x.guest.name||x.guest.birthday||x.guest.phone||x.guest.document)?(n(),l("div",Oe,[t("div",He,[m[1]||(m[1]=t("span",null,"ПІБ",-1)),t("p",null,v(((L=x.guest)==null?void 0:L.name)||"-"),1)]),t("div",Ne,[m[2]||(m[2]=t("span",null,"Дата народження",-1)),t("p",null,v(((T=x.guest)==null?void 0:T.birthday)||"-"),1)]),t("div",Ae,[m[3]||(m[3]=t("span",null,"Номер телефону",-1)),t("p",null,v(((h=x.guest)==null?void 0:h.phone)||"-"),1)]),t("div",Re,[m[4]||(m[4]=t("span",null,"Паспортні дані",-1)),t("p",null,v(((R=x.guest)==null?void 0:R.document)||"-"),1)])])):(n(),l("div",Je,m[5]||(m[5]=[t("i",{class:"hgi-stroke hgi-document-attachment"},null,-1),t("p",null,"Гість ще не підписав жодного договору",-1)])))])}}},Fe=bt(Ze,[["__scopeId","data-v-9c6dd0c3"]]),Pe={class:"guest-info__item guest-card guest-bookings"},Ge={class:"geust-card__header"},Xe={key:0,onclick:"newBooking.showModal()"},Ke={key:0,class:"bookings-list no-bookings"},Ie={key:0,onclick:"newBooking.showModal()"},Ye={key:1,class:"bookings-list"},We={class:"booking-card"},Qe={class:"booking-card__header"},ts={key:0,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",class:"injected-svg","data-src":"https://cdn.hugeicons.com/icons/home-02-stroke-standard.svg?v=3.0","xmlns:xlink":"http://www.w3.org/1999/xlink",role:"img",color:"#000000"},es={key:1,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",class:"injected-svg","data-src":"https://cdn.hugeicons.com/icons/pool-stroke-rounded.svg?v=3.0","xmlns:xlink":"http://www.w3.org/1999/xlink",role:"img",color:"#000000"},ss={key:2,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",class:"injected-svg","data-src":"https://cdn.hugeicons.com/icons/fire-pit-stroke-rounded.svg?v=3.0","xmlns:xlink":"http://www.w3.org/1999/xlink",role:"img",color:"#000000"},os={key:0},ns={class:"booking-actions"},ls=["onClick"],is=["onClick"],as={key:1},us={class:"booking__actions",style:{display:"flex","flex-direction":"column","justify-content":"end"}},ds=["data-sign-stamp"],rs={key:2,id:"showDogovir",class:"modal"},cs={class:"form-input"},ps={class:"form-input"},vs={class:"form-input"},ms={class:"form-input"},gs={class:"modal-action",style:{"margin-top":"0.5rem"}},ks={key:3,id:"addServices",class:"modal"},hs={key:0,class:"services-section"},bs={class:"services-list items-list space-y-4"},fs={class:"font-medium mb-2"},ys={key:0,class:"space-y-2"},ws={class:"flex-1"},_s={class:"input-row"},Cs=["onClick","disabled"],$s=["value"],xs=["onClick"],Ds={key:1,class:"flex items-center justify-between gap-3"},Ss={class:"input-row"},js=["onClick","disabled"],Ms=["value"],Ls=["onClick"],Bs={key:1,class:"services-section mt-6"},Vs={class:"items-list"},Us={class:"flex-1"},Ts={class:"input-row"},Es=["onClick","disabled"],qs=["value"],zs=["onClick"],Os={key:2,class:"services-section"},Hs={class:"items-list space-y-4"},Ns={class:"font-medium mb-2"},As={class:"flex items-center justify-between gap-3"},Rs={class:"input-row"},Js=["onClick","disabled"],Zs=["value"],Fs=["onClick"],Ps={key:3,class:"services-section mt-6"},Gs={class:"items-list space-y-4"},Xs={class:"font-medium mb-2"},Ks={class:"flex items-center justify-between gap-3"},Is={class:"input-row"},Ys=["onClick","disabled"],Ws=["value"],Qs=["onClick"],to={class:"modal-action",style:{"margin-top":"1.5rem"}},eo={id:"newBooking",class:"modal"},so={class:"form-input"},oo={class:"select-input"},no=["onClick"],lo={class:"select-input"},io=["disabled","onClick"],ao={class:"input-row"},uo=["disabled"],ro={class:"form-input form-box"},co=["value"],po={class:"form-input form-box"},vo=["value"],mo={class:"option-block"},go=["onClick"],ko={key:0},ho={key:0,class:"option-subblock"},bo={key:0,class:"duration mt-2"},fo={class:"form-input"},yo={class:"input-row"},wo=["onClick","disabled"],_o=["onUpdate:modelValue"],Co=["onClick"],$o={class:"option-block mt-4"},xo=["onClick"],Do={key:0},So={key:0,class:"option-subblock"},jo={key:0,class:"duration mt-2"},Mo={class:"form-input",style:{"margin-bottom":"0.5rem"}},Lo={class:"input-row"},Bo=["onClick","disabled"],Vo=["onUpdate:modelValue"],Uo=["onClick"],To={class:"fill-options mt-3 form-input"},Eo={class:"fill-buttons mt-1"},qo=["onClick"],zo={key:0},Oo={class:"text-end block"},Ho={class:"select-input"},No=["onClick"],Ao={class:"modal-action",style:{"margin-top":"0.5rem"}},Ro=["disabled"],Jo={key:4,id:"editBooking",class:"modal"},Zo={class:"form-input"},Fo={class:"select-input"},Po=["onClick"],Go={class:"form-input"},Xo={class:"select-input"},Ko=["onClick"],Io={class:"form-input"},Yo={class:"input-row"},Wo=["disabled"],Qo={class:"booking-date mt-4"},tn={class:"form-input form-box"},en=["value"],sn={class:"form-input form-box"},on=["value"],nn={key:0,class:"daily-options mt-6"},ln={class:"option-block"},an=["onClick"],un={key:0},dn={key:0,class:"option-subblock"},rn={class:"duration mt-2"},cn={class:"input-row"},pn=["onClick","disabled"],vn=["onUpdate:modelValue"],mn=["onClick"],gn={class:"option-block mt-4"},kn=["onClick"],hn={key:0},bn={key:0,class:"option-subblock"},fn={class:"duration mt-2"},yn={class:"input-row"},wn=["onClick","disabled"],_n=["onUpdate:modelValue"],Cn=["onClick"],$n={class:"fill-options mt-3"},xn={class:"fill-buttons mt-1"},Dn=["onClick"],Sn={class:"mt-4 form-input"},jn={class:"text-end block"},Mn={class:"modal-action mt-4"},Ln={__name:"GuestBookings",props:{bookings:Object,guest:Object,access:String,name:String},setup(G){const x=xt(),_=G,{user:q}=$t(),m=ht(()=>{var o;return(o=q.value)!=null&&o.teams?q.value.teams.some(e=>{var u;try{const d=typeof e.prefs=="string"?JSON.parse(e.prefs):e.prefs;return(u=d==null?void 0:d.bookings)==null?void 0:u.includes("create")}catch{return!1}}):!1}),L=ht(()=>{var o;return(o=q.value)!=null&&o.teams?q.value.teams.some(e=>{var u;try{const d=typeof e.prefs=="string"?JSON.parse(e.prefs):e.prefs;return(u=d==null?void 0:d.bookings)==null?void 0:u.includes("update")}catch{return!1}}):!1}),T=M([]),h=M({});nt(()=>_.bookings,o=>{_.bookings&&(T.value=_.bookings)},{immediate:!0}),nt(()=>_.guest,o=>{_.guest&&(h.value={..._.guest})},{immediate:!0});function R(o){const[[e,u],[d,s]]=o.split("-").map(p=>p=p.split("T"));return`${e} ${u} - ${d} ${s}`}const i=M({type:null,house:null,date:{in:{date:null,time:null},out:{date:null,time:null}},meta:{guests:0,description:null,poslugy:null,lazni:null}}),it=M([{value:"house",label:"Будинку"},{value:"lazni",label:"Лазні / чану"},{value:"pool",label:"Басейну"}]),at=M([{value:"family",label:"Family House"},{value:"right",label:"RV Right"},{value:"left",label:"RV Left"}]),k=M(null);fetch("https://api.laznikyiv.com/v2/services").then(o=>o.json().then(e=>{k.value=e}));function a(o){o=="pool"&&i.value.house&&(i.value.house="family"),i.value.type=o}function z(o){i.value.house=o}function V(){document.getElementById("newBooking").close()}const J=M([]);function ut(){const o=[];for(let d=360;d<=1440;d+=30){const s=String(Math.floor(d/60)).padStart(2,"0"),p=String(d%60).padStart(2,"0");s=="24"?o.push(`00:${p}`):o.push(`${s}:${p}`)}J.value=o}ut();const X=M([]),Y=[{value:"h",label:"Хвоя"},{value:"c",label:"Цитрус"},{value:"t",label:"Трави"}];function W(){const{in:o,out:e}=i.value.date;if(!o.date||i.value.type==="house"&&!e.date)return;let u=new Date(o.date),d=i.value.type==="house"?new Date(e.date):new Date(o.date);i.value.type==="house"&&(d=new Date(d),d.setDate(d.getDate()-1));const s=[],p=new Date(u);for(;p<=d;)s.push({date:new Date(p),l:{booked:!1,t:2},c:{booked:!1,t:2,f:[]}}),p.setDate(p.getDate()+1);X.value=s}function Q(o,e){const u=o.c.f.indexOf(e);u>-1?o.c.f.splice(u,1):o.c.f.push(e)}function tt(o){return new Intl.DateTimeFormat("uk-UA",{day:"2-digit",month:"short",weekday:"short"}).format(o)}function dt(){const{type:o,house:e,date:u,meta:d}=i.value,s=(B,U)=>{const f=new Date(B),E=String(f.getFullYear()).slice(-2),N=String(f.getMonth()+1).padStart(2,"0");return`${String(f.getDate()).padStart(2,"0")}.${N}.${E}T${U}`};let p="";o==="pool"||o==="lazni"?p=`${s(u.in.date,u.in.time)}-${s(u.in.date,u.out.time)}`:p=`${s(u.in.date,u.in.time)}-${s(u.out.date,u.out.time)}`;let r="",b="";if(["house","lazni"].includes(o)){const B=[],U=[];X.value.forEach(f=>{const E=new Date(f.date).toLocaleDateString("uk-UA",{day:"2-digit",month:"2-digit",year:"2-digit"}).replace(/\//g,".");if(f.l.booked&&f.l.t>0&&B.push(`${E}:${f.l.t}`),f.c.booked&&f.c.t>0){const N=f.c.f.length?f.c.f.join(","):"plain";U.push(`${E}:${f.c.t}:${N}`)}}),r=B.join("|"),b=U.join("|")}const O={guest:x.params.id,type:o,house:o==="pool"?"family":e,date:p,meta:JSON.stringify({g:d.guests,...d.description&&{d:d.description},l:{...r&&{l:r},...b&&{c:b}}})};lt.bookings.create(O).then(B=>{T.value.push(B.booking),document.getElementById("newBooking").close()})}const g=M({type:null,house:null,date:{in:{date:null,time:null},out:{date:null,time:null}},meta:{guests:0,description:null,poslugy:null,lazni:null}}),Z=M([]);function K(o){const e=o.getDate().toString().padStart(2,"0"),u=(o.getMonth()+1).toString().padStart(2,"0"),d=o.getFullYear().toString().slice(-2);return`${e}.${u}.${d}`}function rt(o,e,u){var N,pt,_t,Ct;const d=typeof o=="string"?JSON.parse(o):o,s=((pt=(N=d.l)==null?void 0:N.l)==null?void 0:pt.split("|"))||[],p=((Ct=(_t=d.l)==null?void 0:_t.c)==null?void 0:Ct.split("|"))||[],r={};s.forEach(A=>{const[st,ot]=A.split(":");r[st]={booked:!0,t:Number(ot)}});const b={};p.forEach(A=>{const[st,ot,I]=A.split(":"),Pt=I==="plain"?[]:I.includes(",")?I.split(","):[I];b[st]={booked:!0,t:Number(ot),f:Pt}});const O=A=>{const st=A.getDate().toString().padStart(2,"0"),ot=(A.getMonth()+1).toString().padStart(2,"0"),I=A.getFullYear().toString().slice(-2);return`${st}.${ot}.${I}`},B=new Date(e),U=new Date(u);d.type!=="pool"&&U.setDate(U.getDate()-1);const f=[],E=new Date(B);for(;E<=U;){const A=O(E);f.push({date:new Date(E),l:r[A]||{booked:!1,t:2},c:b[A]||{booked:!1,t:2,f:[]}}),E.setDate(E.getDate()+1)}Z.value=f}function ct(o){const[e,u]=o.split("-"),[d,s]=e.split("T"),[p,r]=u.split("T"),b=O=>{const[B,U,f]=O.split(".");return`20${f}-${U}-${B}`};return{in:{date:b(d),time:s},out:{date:b(p),time:r}}}const F=M({});function D(o){F.value=o,document.getElementById("showDogovir").showModal()}function et(){document.getElementById("showDogovir").close()}function Dt(o){g.value=JSON.parse(JSON.stringify(o)),g.value.date=ct(o.date);const e=typeof o.meta=="string"?JSON.parse(o.meta):o.meta||{};g.value.meta={guests:e.g||0,description:e.d||null,lazni:e.l||null},rt(e,g.value.date.in.date,g.value.date.out.date),document.getElementById("editBooking").showModal()}function ft(){document.getElementById("editBooking").close()}function yt(){const{in:o,out:e}=g.value.date;if(!o.date||g.value.type==="house"&&!e.date)return;let u=new Date(o.date),d=g.value.type==="house"?new Date(e.date):new Date(o.date);g.value.type==="house"&&(d=new Date(d),d.setDate(d.getDate()-1));const s=[],p=new Date(u);for(;p<=d;){const r=K(p),b=Z.value.find(O=>K(O.date)===r);s.push({date:new Date(p),l:(b==null?void 0:b.l)||{booked:!1,t:2},c:(b==null?void 0:b.c)||{booked:!1,t:2,f:[]}}),p.setDate(p.getDate()+1)}Z.value=s}function St(){const{type:o,house:e,date:u,meta:d}=g.value,s=(B,U)=>{const f=new Date(B),E=String(f.getFullYear()).slice(-2),N=String(f.getMonth()+1).padStart(2,"0");return`${String(f.getDate()).padStart(2,"0")}.${N}.${E}T${U}`};let p="";o==="pool"||o==="lazni"?p=`${s(u.in.date,u.in.time)}-${s(u.in.date,u.out.time)}`:p=`${s(u.in.date,u.in.time)}-${s(u.out.date,u.out.time)}`;let r="",b="";if(["house","lazni"].includes(o)){const B=[],U=[];Z.value.forEach(f=>{const E=K(f.date);if(f.l.booked&&f.l.t>0&&B.push(`${E}:${f.l.t}`),f.c.booked&&f.c.t>0){const N=f.c.f.length?f.c.f.join(","):"plain";U.push(`${E}:${f.c.t}:${N}`)}}),r=B.join("|"),b=U.join("|")}const O={guest:x.params.id,type:o,house:o==="pool"?"family":e,date:p,meta:JSON.stringify({g:d.g||d.guests||0,...d.description&&{d:d.description},l:{...r&&{l:r},...b&&{c:b}}})};lt.bookings.update(g.value.$id,O).then(B=>{const U=T.value.findIndex(f=>f.$id===g.value.$id);U>-1&&(T.value[U]=B),mt.success("Бронювання оновлено"),ft()}).catch(B=>{console.error("Update error:",B),mt.error("Помилка оновлення")})}function jt(o){o=="pool"&&g.value.house&&(g.value.house="family"),g.value.type=o}function Mt(o){g.value.house=o}function Lt(){document.getElementById("addServices").showModal()}const Bt=M([{label:"Instagram",value:"i"},{label:"Telegram",value:"tg"},{label:"Viber",value:"v"},{label:"WhatsApp",value:"w"},{label:"Телефон",value:"t"}]),Vt=()=>{let o=h.value.birthday.replace(/\D/g,"").slice(0,8);o.length>=5?h.value.birthday=`${o.slice(0,2)}.${o.slice(2,4)}.${o.slice(4)}`:o.length>=3?h.value.birthday=`${o.slice(0,2)}.${o.slice(2)}`:h.value.birthday=o},Ut=()=>{let o=h.value.phone.replace(/\D/g,"");o.startsWith("380")||(o="380"+o.replace(/^380/,"")),o=o.slice(0,12);const e=[];e.push("+380"),o.length>3&&e.push(" "+o.slice(3,5)),o.length>5&&e.push(" "+o.slice(5,8)),o.length>8&&e.push(" "+o.slice(8,12)),h.value.phone=e.join("")};function Tt(){JSON.stringify(h.value)!==JSON.stringify(_.guest)&&lt.guests.update(_.guest.$id,{name:h.value.name,phone:h.value.phone,birthday:h.value.birthday,document:h.value.document}).then(o=>{_.guest=o.guest,h.value=o.guest,emit}),window.open(`/dogovir/${F.value.$id}?name=${encodeURIComponent(h.value.name)}&&birthday=${encodeURIComponent(h.value.birthday)}&&phone=${encodeURIComponent(h.value.phone)}&&document=${encodeURIComponent(h.value.document)}&&in=${encodeURIComponent(F.value.date.split("-")[0].split("T").join(" "))}&&out=${encodeURIComponent(F.value.date.split("-")[1].split("T").join(" "))}&&house=${encodeURIComponent({family:"Family House",right:"River View Right",left:"River View Left"}[F.value.house])}`,"_blank")}nt(()=>{var o;return(o=k.value)==null?void 0:o.services},o=>{o&&o.forEach(e=>{c.services[e.id]||(c.services[e.id]={qty:0,type:null})})},{immediate:!0});const c=Xt({services:{},kram:{},author:{},comp:{}});nt(()=>{var o;return(o=k.value)==null?void 0:o.services},o=>{o&&o.forEach(e=>{c.services[e.id]||(e.type&&e.type.length?c.services[e.id]={types:{}}:c.services[e.id]={qty:0})})},{immediate:!0});function gt(o,e){var u;return(u=c.services[o])!=null&&u.types&&c.services[o].types[e]||0}function Et(o,e,u){c.services[o]||(c.services[o]={types:{}}),c.services[o].types||(c.services[o].types={}),c.services[o].types[e]||(c.services[o].types[e]=0),c.services[o].types[e]++}function qt(o,e){var u,d;((d=(u=c.services[o])==null?void 0:u.types)==null?void 0:d[e])>0&&c.services[o].types[e]--}function zt(o){c.services[o]||(c.services[o]={qty:0}),c.services[o].qty++}function Ot(o){var e;((e=c.services[o])==null?void 0:e.qty)>0&&c.services[o].qty--}function Ht(o){c.kram[o]||(c.kram[o]=0),c.kram[o]++}function Nt(o){c.kram[o]>0&&c.kram[o]--}function At(o){c.author[o]||(c.author[o]=0),c.author[o]++}function Rt(o){c.author[o]>0&&c.author[o]--}function Jt(o){c.comp[o]||(c.comp[o]=0),c.comp[o]++}function Zt(o){c.comp[o]>0&&c.comp[o]--}function wt(){document.getElementById("addServices").close()}function Ft(){const o={};Object.keys(c.services).forEach(u=>{const d=c.services[u];if(d.types){const s={};Object.keys(d.types).forEach(p=>{d.types[p]>0&&(s[p]=d.types[p])}),Object.keys(s).length>0&&(o[u]={types:s})}else d.qty>0&&(o[u]={qty:d.qty})});const e={};Object.keys(c.kram).forEach(u=>{c.kram[u]>0&&(e[u]=c.kram[u])}),i.value.meta.poslugy={services:o,kram:e},mt.success("Послуги додано"),wt()}return(o,e)=>{var u,d;return n(),l("div",Pe,[t("div",Ge,[e[27]||(e[27]=t("h3",null,"Бронювання",-1)),T.value.length>0&&m.value?(n(),l("button",Xe," + ")):y("",!0)]),T.value.length<1?(n(),l("div",Ke,[e[28]||(e[28]=t("i",{class:"hgi-stroke hgi-calendar-02"},null,-1)),e[29]||(e[29]=t("p",null,"У цього гостя ще немає бронювань",-1)),m.value?(n(),l("button",Ie," Додати бронювання ")):y("",!0)])):(n(),l("div",Ye,[(n(!0),l(C,null,$(T.value,s=>(n(),l("div",We,[t("div",Qe,[t("div",{class:S(["booking-badge",s.house])},[s.type=="house"?(n(),l("svg",ts,e[30]||(e[30]=[t("path",{d:"M3 9.98834V19.5C3 20.6046 3.89543 21.5 5 21.5H19C20.1046 21.5 21 20.6046 21 19.5V9.98834C21 9.3654 20.7097 8.77803 20.2149 8.39963L12.8972 2.80373C12.6396 2.60673 12.3243 2.5 12 2.5C11.6757 2.5 11.3604 2.60673 11.1028 2.80373L3.7851 8.39963C3.29026 8.77804 3 9.3654 3 9.98834Z",stroke:"white","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),t("path",{d:"M17 17.5001V13.5001",stroke:"white","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))):y("",!0),s.type=="pool"?(n(),l("svg",es,e[31]||(e[31]=[t("path",{d:"M22 21H21C19.5486 21 18.278 20.1411 18 19C17.722 20.1411 16.4514 21 15 21C13.5486 21 12.278 20.1411 12 19C11.722 20.1411 10.4514 21 9 21C7.54863 21 6.27796 20.1411 6 19C5.72204 20.1411 4.45137 21 3 21H2",stroke:"white","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),t("path",{d:"M19 3L18.7351 3.0883C17.4151 3.52832 16.755 3.74832 16.3775 4.2721C16 4.79587 16 5.49159 16 6.88304L16 17",stroke:"white","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),t("path",{d:"M11 3L10.7351 3.0883C9.41505 3.52832 8.75503 3.74832 8.37752 4.2721C8 4.79587 8 5.49159 8 6.88304L8 17",stroke:"white","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),t("path",{d:"M8 7H16M8 11H16M8 15H16",stroke:"white","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))):y("",!0),s.type=="lazni"?(n(),l("svg",ss,e[32]||(e[32]=[t("path",{d:"M9.10448 17.5C8.33359 16.5723 8.42384 15.1986 8.69771 14.3155C13.1751 16.5 13.7595 12.5 13.4229 11.5C14.9282 12.5 16.3877 15.9189 14.8371 17.5",stroke:"white","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),t("path",{d:"M8.81631 17.5C5.5924 16.4286 4.76862 11.5478 6.12929 8.92857C7.12501 11.0714 8.75001 11.0714 8.75001 11.0714C7.66668 6.78571 9.83335 3.57143 14.0108 2.5C13.1918 4.001 12.5366 6.34631 14.197 7.84902C14.5485 7.18039 15.7296 5.71429 17.4167 5.71429C17.4167 5.71429 16.1196 8.01619 17.5273 10.0221C19.152 12.3372 18.736 15.7851 16.3196 17.5",stroke:"white","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),t("path",{d:"M20.5 17.5H3.5L4.1601 19.9851C4.4949 21.2455 4.84122 21.5 6.22165 21.5H17.7783C19.1588 21.5 19.5051 21.2455 19.8399 19.9851L20.5 17.5Z",stroke:"white","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),t("path",{d:"M3.55556 17.5H2.5M20.4444 17.5H21.5",stroke:"white","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))):y("",!0)],2),t("p",null,v(R(s.date)),1)]),t("mark",null,v(s.$id),1),s.c?(n(),l("td",as,[t("div",us,[t("span",{style:{display:"flex","align-items":"center","justify-content":"center",gap:"0.25rem"},class:"dogovir-badge","data-sign-stamp":JSON.parse(s.c).t},e[37]||(e[37]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",class:"injected-svg","data-src":"https://cdn.hugeicons.com/icons/checkmark-circle-01-stroke-sharp.svg?v=2.0","xmlns:xlink":"http://www.w3.org/1999/xlink",role:"img",color:"#000000"},[t("path",{d:"M22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22C17.5228 22 22 17.5228 22 12Z",stroke:"#000000","stroke-width":"1.5"}),t("path",{d:"M8 13.0714C8 13.0714 9.5 13.7143 10.4 15C10.4 15 12.5 10.7143 16 9",stroke:"#000000","stroke-width":"1.5","stroke-linecap":"square"})],-1)]),8,ds),e[38]||(e[38]=t("button",{style:{"justify-self":"end","align-self":"end"}},[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",class:"injected-svg","data-src":"https://cdn.hugeicons.com/icons/download-02-stroke-standard.svg?v=3.0","xmlns:xlink":"http://www.w3.org/1999/xlink",role:"img",color:"#ffffff"},[t("path",{d:"M8 12L12 16L16 12M12 15L12 3",stroke:"#ffffff","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),t("path",{d:"M17 8C19.2091 8 21 9.79086 21 12V17C21 19.2091 19.2091 21 17 21H7C4.79086 21 3 19.2091 3 17V12C3 9.79086 4.79086 8 7 8",stroke:"#ffffff","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})])],-1))])])):(n(),l("td",os,[e[36]||(e[36]=t("br",null,null,-1)),t("div",ns,[t("button",{onClick:p=>D(s)},e[33]||(e[33]=[t("i",{class:"hgi hgi-stroke hgi-signature"},null,-1)]),8,ls),e[35]||(e[35]=t("button",null,[t("i",{class:"hgi hgi-stroke hgi-invoice"})],-1)),L.value?(n(),l("button",{key:0,class:"icon-btn",onClick:p=>Dt(s),title:"Редагувати бронювання"},e[34]||(e[34]=[t("svg",{"data-v-f30a09f7":"",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none"},[t("path",{"data-v-f30a09f7":"",d:"M18.799 3.0499C17.7324 1.98335 16.0032 1.98337 14.9366 3.04994L13.5236 4.46296L19.537 10.4763L20.9501 9.06321C22.0167 7.99665 22.0166 6.26746 20.9501 5.20092L18.799 3.0499Z",fill:"white"}),t("path",{"data-v-f30a09f7":"",d:"M18.4764 11.537L12.463 5.52363L4.35808 13.6286C3.66361 14.3231 3.20349 15.2172 3.04202 16.1859L2.26021 20.8767C2.22039 21.1156 2.29841 21.3591 2.46968 21.5303C2.64095 21.7016 2.88439 21.7796 3.12331 21.7398L7.81417 20.958C8.78294 20.7965 9.67706 20.3364 10.3715 19.642L18.4764 11.537Z",fill:"white"})],-1)]),8,is)):y("",!0)])]))]))),256))])),h.value?(n(),l("dialog",rs,[t("form",{class:"modal-box",onSubmit:e[5]||(e[5]=P(s=>Tt(),["prevent"]))},[e[44]||(e[44]=t("h3",{class:"text-lg font-bold mb-4"},"Договір",-1)),t("div",cs,[e[39]||(e[39]=t("label",{for:""},"ПІБ",-1)),w(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=s=>h.value.name=s)},null,512),[[j,h.value.name]])]),t("div",ps,[e[40]||(e[40]=t("label",{for:""},"Дата народження",-1)),w(t("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=s=>h.value.birthday=s),onInput:Vt,placeholder:"ДД.ММ.РРР"},null,544),[[j,h.value.birthday]])]),t("div",vs,[e[41]||(e[41]=t("label",{for:""},"Номер телефону",-1)),w(t("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=s=>h.value.phone=s),onInput:Ut,placeholder:"+380 XX XXX XXXX"},null,544),[[j,h.value.phone]])]),t("div",ms,[e[42]||(e[42]=t("label",{for:""},"Документ",-1)),w(t("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=s=>h.value.document=s)},null,512),[[j,h.value.document]])]),t("div",gs,[t("button",{class:"secondary",type:"button",onClick:e[4]||(e[4]=s=>et())},"Скасувати"),e[43]||(e[43]=t("button",{type:"submit"},"Відкрити",-1))])],32)])):y("",!0),k.value?(n(),l("dialog",ks,[t("form",{class:"modal-box",onSubmit:P(Ft,["prevent"])},[e[50]||(e[50]=t("h3",{class:"text-lg font-bold mb-4"},"Послуги",-1)),k.value.services&&k.value.services.length?(n(),l("div",hs,[e[46]||(e[46]=t("h4",{class:"font-semibold mb-3"},"Послуги",-1)),t("div",bs,[(n(!0),l(C,null,$(k.value.services,s=>{var p,r;return n(),l("div",{class:"service-item",key:s.id},[t("p",fs,v(s.name),1),s.type&&s.type.length?(n(),l("div",ys,[(n(!0),l(C,null,$(s.type,b=>(n(),l("div",{key:b.id,class:"flex items-center justify-between gap-3"},[t("span",ws,v(b.name),1),t("div",_s,[t("button",{type:"button",onClick:O=>qt(s.id,b.id),disabled:!gt(s.id,b.id)||gt(s.id,b.id)<=0},"-",8,Cs),t("input",{type:"number",value:gt(s.id,b.id)||0,readonly:"",class:"w-16 text-center"},null,8,$s),t("button",{type:"button",onClick:O=>Et(s.id,b.id)},"+",8,xs)])]))),128))])):(n(),l("div",Ds,[e[45]||(e[45]=t("span",{class:"flex-1"},"Кількість",-1)),t("div",Ss,[t("button",{type:"button",onClick:b=>Ot(s.id),disabled:!((p=c.services[s.id])!=null&&p.qty)||c.services[s.id].qty<=0},"-",8,js),t("input",{type:"number",value:((r=c.services[s.id])==null?void 0:r.qty)||0,readonly:"",class:"w-16 text-center"},null,8,Ms),t("button",{type:"button",onClick:b=>zt(s.id)},"+",8,Ls)])]))])}),128))])])):y("",!0),k.value.kram?(n(),l("div",Bs,[(n(!0),l(C,null,$(k.value.kram,(s,p)=>(n(),l("div",{key:p,class:"mb-4"},[t("h4",null,v(s[0].category),1),t("div",Vs,[(n(!0),l(C,null,$(s,r=>(n(),l("div",{key:r.id,class:"service-item"},[t("span",Us,v(r.name),1),t("div",Ts,[t("button",{type:"button",onClick:b=>Nt(r.id),disabled:!c.kram[r.id]||c.kram[r.id]<=0},"-",8,Es),t("input",{type:"number",value:c.kram[r.id]||0,readonly:"",class:"w-16 text-center"},null,8,qs),t("button",{type:"button",onClick:b=>Ht(r.id)},"+",8,zs)])]))),128))])]))),128))])):y("",!0),k.value.author_specials&&k.value.author_specials.length?(n(),l("div",Os,[e[47]||(e[47]=t("h4",{class:"font-semibold mb-3"},"Авторські спеціали",-1)),t("div",Hs,[(n(!0),l(C,null,$(k.value.author_specials,s=>(n(),l("div",{class:"service-item",key:s.id},[t("p",Ns,v(s.name),1),t("div",As,[t("div",Rs,[t("button",{type:"button",onClick:p=>Rt(s.id),disabled:!c.author[s.id]||c.author[s.id]<=0}," - ",8,Js),t("input",{type:"number",value:c.author[s.id]||0,readonly:"",class:"w-16 text-center"},null,8,Zs),t("button",{type:"button",onClick:p=>At(s.id)},"+",8,Fs)])])]))),128))])])):y("",!0),k.value.complexes&&k.value.complexes.length?(n(),l("div",Ps,[e[48]||(e[48]=t("h4",{class:"font-semibold mb-3"},"Комплекси",-1)),t("div",Gs,[(n(!0),l(C,null,$(k.value.complexes,s=>(n(),l("div",{class:"service-item",key:s.id},[t("p",Xs,v(s.name),1),t("div",Ks,[t("div",Is,[t("button",{type:"button",onClick:p=>Zt(s.id),disabled:!c.comp[s.id]||c.comp[s.id]<=0}," - ",8,Ys),t("input",{type:"number",value:c.comp[s.id]||0,readonly:"",class:"w-16 text-center"},null,8,Ws),t("button",{type:"button",onClick:p=>Jt(s.id)},"+",8,Qs)])])]))),128))])])):y("",!0),t("div",to,[t("button",{class:"secondary",type:"button",onClick:e[6]||(e[6]=s=>wt())},"Скасувати"),e[49]||(e[49]=t("button",{type:"submit"},"Зберегти",-1))])],32)])):y("",!0),t("dialog",eo,[t("form",{class:"modal-box",onSubmit:P(dt,["prevent"])},[e[70]||(e[70]=t("h3",{class:"text-lg font-bold mb-4"},"Додати бронювання",-1)),t("div",so,[e[51]||(e[51]=t("label",null,"Оренда",-1)),t("div",oo,[(n(!0),l(C,null,$(it.value,s=>(n(),l("button",{key:s.value,type:"button",class:S(["house",{selected:i.value.type===s.value}]),onClick:p=>a(s.value)},v(s.label),11,no))),128))])]),t("div",{class:S(["form-input",{blured:!i.value.type}])},[e[52]||(e[52]=t("label",null,"Будинок",-1)),t("div",lo,[(n(!0),l(C,null,$(at.value,s=>(n(),l("button",{key:s.value,type:"button",disabled:s.value!=="family"&&i.value.type=="pool",class:S(["house",{selected:i.value.house===s.value}]),onClick:p=>z(s.value)},v(s.label),11,io))),128))])],2),t("div",{style:{"margin-bottom":"0.5rem"},class:S(["form-input",{blured:!i.value.type||!i.value.house}])},[e[53]||(e[53]=t("label",null,"Кількість осіб",-1)),t("div",ao,[t("button",{type:"button",onClick:e[7]||(e[7]=s=>i.value.meta.guests--),disabled:i.value.meta.guests<=1},"-",8,uo),w(t("input",{type:"number",min:"1","onUpdate:modelValue":e[8]||(e[8]=s=>i.value.meta.guests=s),readonly:""},null,512),[[j,i.value.meta.guests]]),t("button",{type:"button",onClick:e[9]||(e[9]=s=>i.value.meta.guests++)},"+")])],2),t("div",{class:S(["booking-date",{blured:i.value.meta.guests==0}])},[t("div",ro,[e[55]||(e[55]=t("label",null,[t("span",null,"Заїзд")],-1)),w(t("input",{type:"date",required:"","onUpdate:modelValue":e[10]||(e[10]=s=>i.value.date.in.date=s),onChange:W},null,544),[[j,i.value.date.in.date]]),w(t("select",{required:"","onUpdate:modelValue":e[11]||(e[11]=s=>i.value.date.in.time=s)},[e[54]||(e[54]=t("option",{disabled:"",hidden:"",value:""},"--:--",-1)),(n(!0),l(C,null,$(J.value,s=>(n(),l("option",{key:s,value:s},v(s),9,co))),128))],512),[[vt,i.value.date.in.time]])]),t("div",po,[e[57]||(e[57]=t("label",null,[t("span",null,"Виїзд")],-1)),i.value.type==="house"?w((n(),l("input",{key:0,type:"date",required:"","onUpdate:modelValue":e[12]||(e[12]=s=>i.value.date.out.date=s),onChange:W},null,544)),[[j,i.value.date.out.date]]):w((n(),l("input",{key:1,type:"date",required:"","onUpdate:modelValue":e[13]||(e[13]=s=>i.value.date.in.date=s),readonly:""},null,512)),[[j,i.value.date.in.date]]),w(t("select",{required:"","onUpdate:modelValue":e[14]||(e[14]=s=>i.value.date.out.time=s)},[e[56]||(e[56]=t("option",{disabled:"",hidden:"",value:""},"--:--",-1)),(n(!0),l(C,null,$(J.value,s=>(n(),l("option",{key:s,value:s},v(s),9,vo))),128))],512),[[vt,i.value.date.out.time]])])],2),i.value.type==="house"||i.value.type==="lazni"?(n(),l("div",{key:0,class:S(["daily-options",{blured:!i.value.date.in.time||!i.value.date.in.date||!["lazni","pool"].includes(i.value.type)&&(!i.value.date.out.time||!i.value.date.out.date)}])},[(n(!0),l(C,null,$(X.value,(s,p)=>(n(),l("div",{key:p,class:"daily-card"},[t("h4",null,v(tt(s.date)),1),t("div",mo,[t("button",{type:"button",class:S([s.l.booked?"primary":"secondary","toggle-btn","sub-tab"]),onClick:r=>s.l.booked=!s.l.booked},[s.l.booked?(n(),l("span",ko,e[58]||(e[58]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",class:"injected-svg","data-src":"https://cdn.hugeicons.com/icons/tick-01-stroke-rounded.svg?v=3.0","xmlns:xlink":"http://www.w3.org/1999/xlink",role:"img",color:"#000000"},[t("path",{d:"M5 14.5C5 14.5 6.5 14.5 8.5 18C8.5 18 14.0588 8.83333 19 7",stroke:"#000000","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]))):y("",!0),e[59]||(e[59]=H(" Лазня "))],10,go),s.l.booked?(n(),l("div",ho,[s.l.booked?(n(),l("div",bo,[t("div",fo,[e[60]||(e[60]=t("label",null,"Години",-1)),t("div",yo,[t("button",{type:"button",onClick:r=>s.l.t--,disabled:s.l.t<=2},"-",8,wo),w(t("input",{type:"number","onUpdate:modelValue":r=>s.l.t=r,readonly:""},null,8,_o),[[j,s.l.t]]),t("button",{type:"button",onClick:r=>s.l.t++},"+",8,Co)])])])):y("",!0)])):y("",!0)]),t("div",$o,[t("button",{type:"button",class:S([s.c.booked?"primary":"secondary","toggle-btn","sub-tab"]),onClick:r=>s.c.booked=!s.c.booked},[s.c.booked?(n(),l("span",Do,e[61]||(e[61]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",class:"injected-svg","data-src":"https://cdn.hugeicons.com/icons/tick-01-stroke-rounded.svg?v=3.0","xmlns:xlink":"http://www.w3.org/1999/xlink",role:"img",color:"#000000"},[t("path",{d:"M5 14.5C5 14.5 6.5 14.5 8.5 18C8.5 18 14.0588 8.83333 19 7",stroke:"#000000","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]))):y("",!0),e[62]||(e[62]=H(" Чан "))],10,xo),s.c.booked?(n(),l("div",So,[s.c.booked?(n(),l("div",jo,[t("div",Mo,[e[63]||(e[63]=t("label",null,"Години",-1)),t("div",Lo,[t("button",{type:"button",onClick:r=>s.c.t--,disabled:s.c.t<=2},"-",8,Bo),w(t("input",{type:"number","onUpdate:modelValue":r=>s.c.t=r,readonly:""},null,8,Vo),[[j,s.c.t]]),t("button",{type:"button",onClick:r=>s.c.t++},"+",8,Uo)])]),t("div",To,[e[65]||(e[65]=t("label",null,"Наповнення",-1)),t("div",Eo,[(n(),l(C,null,$(Y,r=>t("button",{key:r.value,type:"button",class:S([s.c.f.includes(r.value)?"primary":"secondary","toggle-btn"]),onClick:b=>Q(s,r.value)},[s.c.f.includes(r.value)?(n(),l("span",zo,e[64]||(e[64]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",class:"injected-svg","data-src":"https://cdn.hugeicons.com/icons/tick-01-stroke-rounded.svg?v=3.0","xmlns:xlink":"http://www.w3.org/1999/xlink",role:"img",color:"#000000"},[t("path",{d:"M5 14.5C5 14.5 6.5 14.5 8.5 18C8.5 18 14.0588 8.83333 19 7",stroke:"#000000","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]))):y("",!0),H(" "+v(r.label),1)],10,qo)),64))])])])):y("",!0)])):y("",!0),e[66]||(e[66]=t("br",null,null,-1))])]))),128))],2)):y("",!0),t("div",{class:S(["form-input",{blured:!i.value.type||!i.value.house||i.value.meta.guests==0||!i.value.date.in.time||!i.value.date.in.date||!i.value.date.out.time||!["lazni","pool"].includes(i.value.type)&&(!i.value.date.out.time||!i.value.date.out.date)}])},[e[67]||(e[67]=t("label",null,"Послуги",-1)),t("button",{onClick:P(Lt,["prevent"])}," Додати ")],2),t("div",{class:S(["form-input",{blured:!i.value.type||!i.value.house||i.value.meta.guests==0||!i.value.date.in.time||!i.value.date.in.date||!i.value.date.out.time||!["lazni","pool"].includes(i.value.type)&&(!i.value.date.out.time||!i.value.date.out.date)}])},[e[68]||(e[68]=t("label",null,"Коментар",-1)),w(t("textarea",{"onUpdate:modelValue":e[15]||(e[15]=s=>i.value.meta.description=s),maxlength:"100",rows:"3"},null,512),[[j,i.value.meta.description]]),t("small",Oo,v(((u=i.value.meta.description)==null?void 0:u.length)||0)+"/100",1)],2),t("div",{class:S(["form-input",{blured:!i.value.type||!i.value.house||i.value.meta.guests==0||!i.value.date.in.time||!i.value.date.in.date||!i.value.date.out.time||!["lazni","pool"].includes(i.value.type)&&(!i.value.date.out.time||!i.value.date.out.date)}])},[e[69]||(e[69]=t("label",{class:"mt-4"},"Джерело",-1)),t("div",Ho,[(n(!0),l(C,null,$(Bt.value,s=>(n(),l("button",{key:s.value,type:"button",class:S(["house",{selected:i.value.meta.source===s.value}]),onClick:p=>i.value.meta.source=s.value},v(s.label),11,No))),128))])],2),t("div",Ao,[t("button",{class:"secondary",type:"button",onClick:e[16]||(e[16]=s=>V())},"Скасувати"),t("button",{type:"submit",disabled:!i.value.type||!i.value.house||i.value.meta.guests==0||!i.value.date.in.time||!i.value.date.in.date||!i.value.date.out.time||!["lazni","pool"].includes(i.value.type)&&(!i.value.date.out.time||!i.value.date.out.date)},"Додати",8,Ro)])],32)]),g.value?(n(),l("dialog",Jo,[t("form",{class:"modal-box",onSubmit:P(St,["prevent"])},[e[85]||(e[85]=t("h3",{class:"text-lg font-bold mb-4"},"Редагувати бронювання",-1)),t("div",Zo,[e[71]||(e[71]=t("label",null,"Оренда",-1)),t("div",Fo,[(n(!0),l(C,null,$(it.value,s=>(n(),l("button",{key:s.value,type:"button",class:S(["house",{selected:g.value.type===s.value}]),onClick:p=>jt(s.value)},v(s.label),11,Po))),128))])]),t("div",Go,[e[72]||(e[72]=t("label",null,"Будинок",-1)),t("div",Xo,[(n(!0),l(C,null,$(at.value,s=>(n(),l("button",{key:s.value,type:"button",class:S(["house",{selected:g.value.house===s.value}]),onClick:p=>Mt(s.value)},v(s.label),11,Ko))),128))])]),t("div",Io,[e[73]||(e[73]=t("label",null,"Кількість осіб",-1)),t("div",Yo,[t("button",{type:"button",onClick:e[17]||(e[17]=s=>g.value.meta.guests--),disabled:g.value.meta.guests<=1},"-",8,Wo),w(t("input",{type:"number","onUpdate:modelValue":e[18]||(e[18]=s=>g.value.meta.guests=s),readonly:""},null,512),[[j,g.value.meta.guests]]),t("button",{type:"button",onClick:e[19]||(e[19]=s=>g.value.meta.guests++)},"+")])]),t("div",Qo,[t("div",tn,[e[75]||(e[75]=t("label",null,"Заїзд",-1)),w(t("input",{type:"date",required:"","onUpdate:modelValue":e[20]||(e[20]=s=>g.value.date.in.date=s),onChange:yt},null,544),[[j,g.value.date.in.date]]),w(t("select",{required:"","onUpdate:modelValue":e[21]||(e[21]=s=>g.value.date.in.time=s)},[e[74]||(e[74]=t("option",{disabled:"",hidden:"",value:""},"--:--",-1)),(n(!0),l(C,null,$(J.value,s=>(n(),l("option",{key:s,value:s},v(s),9,en))),128))],512),[[vt,g.value.date.in.time]])]),t("div",sn,[e[77]||(e[77]=t("label",null,"Виїзд",-1)),g.value.type==="house"?w((n(),l("input",{key:0,type:"date",required:"","onUpdate:modelValue":e[22]||(e[22]=s=>g.value.date.out.date=s),onChange:yt},null,544)),[[j,g.value.date.out.date]]):w((n(),l("input",{key:1,type:"date",required:"","onUpdate:modelValue":e[23]||(e[23]=s=>g.value.date.in.date=s),readonly:""},null,512)),[[j,g.value.date.in.date]]),w(t("select",{required:"","onUpdate:modelValue":e[24]||(e[24]=s=>g.value.date.out.time=s)},[e[76]||(e[76]=t("option",{disabled:"",hidden:"",value:""},"--:--",-1)),(n(!0),l(C,null,$(J.value,s=>(n(),l("option",{key:s,value:s},v(s),9,on))),128))],512),[[vt,g.value.date.out.time]])])]),g.value.type==="house"||g.value.type==="lazni"?(n(),l("div",nn,[(n(!0),l(C,null,$(Z.value,(s,p)=>(n(),l("div",{key:p,class:"daily-card"},[t("h4",null,v(tt(s.date)),1),t("div",ln,[t("button",{type:"button",class:S([s.l.booked?"primary":"secondary","toggle-btn","sub-tab"]),onClick:r=>s.l.booked=!s.l.booked},[s.l.booked?(n(),l("span",un,"✓")):y("",!0),e[78]||(e[78]=H(" Лазня "))],10,an),s.l.booked?(n(),l("div",dn,[t("div",rn,[e[79]||(e[79]=t("label",null,"Години",-1)),t("div",cn,[t("button",{type:"button",onClick:r=>s.l.t--,disabled:s.l.t<=2},"-",8,pn),w(t("input",{type:"number","onUpdate:modelValue":r=>s.l.t=r,readonly:""},null,8,vn),[[j,s.l.t]]),t("button",{type:"button",onClick:r=>s.l.t++},"+",8,mn)])])])):y("",!0)]),t("div",gn,[t("button",{type:"button",class:S([s.c.booked?"primary":"secondary","toggle-btn","sub-tab"]),onClick:r=>s.c.booked=!s.c.booked},[s.c.booked?(n(),l("span",hn,"✓")):y("",!0),e[80]||(e[80]=H(" Чан "))],10,kn),s.c.booked?(n(),l("div",bn,[t("div",fn,[e[81]||(e[81]=t("label",null,"Години",-1)),t("div",yn,[t("button",{type:"button",onClick:r=>s.c.t--,disabled:s.c.t<=2},"-",8,wn),w(t("input",{type:"number","onUpdate:modelValue":r=>s.c.t=r,readonly:""},null,8,_n),[[j,s.c.t]]),t("button",{type:"button",onClick:r=>s.c.t++},"+",8,Cn)])]),t("div",$n,[e[82]||(e[82]=t("label",null,"Наповнення",-1)),t("div",xn,[(n(),l(C,null,$(Y,r=>t("button",{key:r.value,type:"button",class:S([s.c.f.includes(r.value)?"primary":"secondary","toggle-btn"]),onClick:b=>Q(s,r.value)},v(r.label),11,Dn)),64))])])])):y("",!0)])]))),128))])):y("",!0),t("div",Sn,[e[83]||(e[83]=t("label",null,"Коментар",-1)),w(t("textarea",{"onUpdate:modelValue":e[25]||(e[25]=s=>g.value.meta.description=s),maxlength:"100",rows:"3"},null,512),[[j,g.value.meta.description]]),t("small",jn,v(((d=g.value.meta.description)==null?void 0:d.length)||0)+"/100",1)]),t("div",Mn,[t("button",{type:"button",class:"secondary",onClick:e[26]||(e[26]=s=>ft())},"Скасувати"),e[84]||(e[84]=t("button",{type:"submit"},"Оновити",-1))])],32)])):y("",!0)])}}},Bn={class:"guest-info"},Vn={__name:"GuestView",setup(G){const x=M(null),_=M(null),q=M([]),m=xt();return Kt(async()=>{lt.guests.get(m.params.id).then(L=>{_.value=L.guest,q.value=L.bookings}).catch(L=>{sessionStorage.setItem("guest-error","get-error"),It.push("/guests/")})}),(L,T)=>(n(),Yt(Gt,null,{default:Wt(()=>{var h;return[t("div",Bn,[kt(Ve,{guest:_.value,auth:x.value,onUpdate:T[0]||(T[0]=R=>_.value=R)},null,8,["guest","auth"]),kt(Fe,{guest:_.value,auth:x.value},null,8,["guest","auth"]),kt(Ln,{bookings:q.value,guest:_.value,access:x.value,name:(h=_.value)==null?void 0:h.alias},null,8,["bookings","guest","access","name"])])]}),_:1}))}},Hn=bt(Vn,[["__scopeId","data-v-e37b17af"]]);export{Hn as default};
