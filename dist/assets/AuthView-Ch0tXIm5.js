import{c as t,o,r as k,a as y,t as p,b as n,d as b,p as f,e as m,u as w,f as s,w as x,g as V,h as c,v as L,i as z,j as B,k as D,l as K}from"./index-Djdg4anx.js";import{t as M}from"./toastr-CY63SwY8.js";/* empty css                   */import"./_commonjsHelpers-CqkleIqs.js";const q={__name:"LKButton",props:{icon:{type:Text}},setup(v){const a=v;return(i,r)=>(o(),t("button",null,[k(i.$slots,"default"),y(p(a.icon),1)]))}},N={key:0,class:"content"},S={class:"form"},T={key:0,class:"form__content"},$={class:"form-input"},C={class:"form-input"},E=["type"],U={key:0,class:"hgi hgi-stroke hgi-view-off-slash"},j={key:1,class:"hgi hgi-stroke hgi-view"},A={class:"version"},F={key:1,class:"content not-auth"},I={__name:"AuthView",setup(v){const a=n(""),i=n("");n(null);const r=n(!0);n(null);const d=n(!1),h=K();window.addEventListener("beforeinstallprompt",u=>{}),b(()=>{f.value&&m.verify().then(u=>{u.valid?window.location.href="/dashboard":r.value=!1})});async function _(){const u=a.value,e=i.value;r.value=!0,m.login(u,e).then(l=>{if(l.error)M.error("Помилка авторизації"),r.value=!1;else{const g=h.query.redirect||"/dashboard";window.location.href=g}})}return(u,e)=>w(f)?(o(),t("div",N,[s("div",S,[e[10]||(e[10]=s("div",{class:"header"},[s("h2",null,"Lazni Kyiv"),s("p",null,"Адміністрування")],-1)),r.value?(o(),t("div",T,e[3]||(e[3]=[s("span",{class:"loader"},null,-1)]))):(o(),t("form",{key:1,class:"form__content",onSubmit:x(_,["prevent"])},[e[7]||(e[7]=s("h2",null,"Вхід",-1)),e[8]||(e[8]=s("br",null,null,-1)),s("div",$,[e[4]||(e[4]=s("label",{for:""},"Логін",-1)),c(s("input",{type:"email",placeholder:"example@laznikyiv.com",required:"","onUpdate:modelValue":e[0]||(e[0]=l=>a.value=l)},null,512),[[L,a.value]])]),s("div",C,[e[5]||(e[5]=s("label",{for:""},"Пароль",-1)),c(s("input",{type:d.value?"text":"password",placeholder:"••••••••",required:"","onUpdate:modelValue":e[1]||(e[1]=l=>i.value=l)},null,8,E),[[z,i.value]]),s("span",{onClick:e[2]||(e[2]=l=>d.value=!d.value),class:"password-toggle"},[d.value?(o(),t("i",U)):(o(),t("i",j))])]),e[9]||(e[9]=s("br",null,null,-1)),V(q,null,{default:B(()=>e[6]||(e[6]=[y(" Увійти ")])),_:1}),s("small",A," v "+p(w(D))+" © "+p(new Date().getFullYear())+" Lazni Kyiv ",1)],32))])])):(o(),t("div",F,e[11]||(e[11]=[s("h1",null,"Lazni Kyiv",-1),s("p",null,"Доступ до панелі адміністрування заблоковано",-1)])))}};export{I as default};
