import{g as _r}from"./_commonjsHelpers-CqkleIqs.js";import{q as K,e as le,o as ae,j as q,i as B,u as ue,c as jr,b as me,t as pt,a as xe,f as Ue,x as Ur,g as Bt}from"./index-DfC6sHtH.js";import{A as qr}from"./AdminView-DgyvBQoU.js";import{P as X,D as Yt,r as At,a as kt,d as Sr,S as Zt,b as Wt,l as gt,_ as ne,c as xr,e as Y,f as It,i as Tt,t as ee,g as Mr,h as Ht,j as Rt,k as Pt,m as Et,p as Jr,n as Kr,o as ke,u as Ie,q as rt,s as wr,v as Qr,G as Dt,w as ea,x as zt,C as Ar,y as Dr,z as ct,R as $e,A as ye,B as Lr,E as Cr,F as ta,H as ra,I as Or,J as kr,K as aa,L as na,M as Xe,N as ia,O as oa,Q as sa,T as la,U as ua,V as qe,W as j,X as Fe,Y as ca,Z as ha,$ as da,a0 as Ir,a1 as Tr,a2 as fa,a3 as pa,a4 as ga,a5 as W,a6 as va,a7 as ma,a8 as ya,a9 as ba,aa as _a,ab as Sa,ac as xa,ad as Lt,ae as Gt,af as st,ag as Ma,ah as Rr,ai as Te,aj as Pr,ak as Ft,al as wa,am as Ct,an as Aa,ao as Da,ap as He,aq as La,ar as Ca,as as Oa,at as Er,au as ka,av as Ia,aw as Ta,ax as Ra,ay as Pa,az as Xt,aA as Ea,aB as za,aC as $a,aD as Va,aE as jt,aF as Na,aG as Ba,aH as re,aI as ce,aJ as he,aK as de,aL as fe,aM as J,aN as Re,aO as Ce}from"./AnalyticsCard-DgyhBn00.js";import{_ as Pe}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                  */import"./Icon-CMnBudPe.js";var at={exports:{}},Ya=at.exports,Ut;function zr(){return Ut||(Ut=1,function(o,r){(function(e,t){o.exports=t()})(Ya,function(){var e=1e3,t=6e4,a=36e5,i="millisecond",n="second",s="minute",l="hour",c="day",u="week",h="month",d="quarter",f="year",p="date",v="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,b=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,_={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(A){var m=["th","st","nd","rd"],S=A%100;return"["+A+(m[(S-20)%10]||m[S]||m[0])+"]"}},x=function(A,m,S){var D=String(A);return!D||D.length>=m?A:""+Array(m+1-D.length).join(S)+A},O={s:x,z:function(A){var m=-A.utcOffset(),S=Math.abs(m),D=Math.floor(S/60),y=S%60;return(m<=0?"+":"-")+x(D,2,"0")+":"+x(y,2,"0")},m:function A(m,S){if(m.date()<S.date())return-A(S,m);var D=12*(S.year()-m.year())+(S.month()-m.month()),y=m.clone().add(D,h),L=S-y<0,C=m.clone().add(D+(L?-1:1),h);return+(-(D+(S-y)/(L?y-C:C-y))||0)},a:function(A){return A<0?Math.ceil(A)||0:Math.floor(A)},p:function(A){return{M:h,y:f,w:u,d:c,D:p,h:l,m:s,s:n,ms:i,Q:d}[A]||String(A||"").toLowerCase().replace(/s$/,"")},u:function(A){return A===void 0}},w="en",T={};T[w]=_;var P="$isDayjsObject",k=function(A){return A instanceof V||!(!A||!A[P])},$=function A(m,S,D){var y;if(!m)return w;if(typeof m=="string"){var L=m.toLowerCase();T[L]&&(y=L),S&&(T[L]=S,y=L);var C=m.split("-");if(!y&&C.length>1)return A(C[0])}else{var I=m.name;T[I]=m,y=I}return!D&&y&&(w=y),y||!D&&w},E=function(A,m){if(k(A))return A.clone();var S=typeof m=="object"?m:{};return S.date=A,S.args=arguments,new V(S)},M=O;M.l=$,M.i=k,M.w=function(A,m){return E(A,{locale:m.$L,utc:m.$u,x:m.$x,$offset:m.$offset})};var V=function(){function A(S){this.$L=$(S.locale,null,!0),this.parse(S),this.$x=this.$x||S.x||{},this[P]=!0}var m=A.prototype;return m.parse=function(S){this.$d=function(D){var y=D.date,L=D.utc;if(y===null)return new Date(NaN);if(M.u(y))return new Date;if(y instanceof Date)return new Date(y);if(typeof y=="string"&&!/Z$/i.test(y)){var C=y.match(g);if(C){var I=C[2]-1||0,z=(C[7]||"0").substring(0,3);return L?new Date(Date.UTC(C[1],I,C[3]||1,C[4]||0,C[5]||0,C[6]||0,z)):new Date(C[1],I,C[3]||1,C[4]||0,C[5]||0,C[6]||0,z)}}return new Date(y)}(S),this.init()},m.init=function(){var S=this.$d;this.$y=S.getFullYear(),this.$M=S.getMonth(),this.$D=S.getDate(),this.$W=S.getDay(),this.$H=S.getHours(),this.$m=S.getMinutes(),this.$s=S.getSeconds(),this.$ms=S.getMilliseconds()},m.$utils=function(){return M},m.isValid=function(){return this.$d.toString()!==v},m.isSame=function(S,D){var y=E(S);return this.startOf(D)<=y&&y<=this.endOf(D)},m.isAfter=function(S,D){return E(S)<this.startOf(D)},m.isBefore=function(S,D){return this.endOf(D)<E(S)},m.$g=function(S,D,y){return M.u(S)?this[D]:this.set(y,S)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(S,D){var y=this,L=!!M.u(D)||D,C=M.p(S),I=function(se,G){var Q=M.w(y.$u?Date.UTC(y.$y,G,se):new Date(y.$y,G,se),y);return L?Q:Q.endOf(c)},z=function(se,G){return M.w(y.toDate()[se].apply(y.toDate("s"),(L?[0,0,0,0]:[23,59,59,999]).slice(G)),y)},N=this.$W,Z=this.$M,F=this.$D,ge="set"+(this.$u?"UTC":"");switch(C){case f:return L?I(1,0):I(31,11);case h:return L?I(1,Z):I(0,Z+1);case u:var ie=this.$locale().weekStart||0,oe=(N<ie?N+7:N)-ie;return I(L?F-oe:F+(6-oe),Z);case c:case p:return z(ge+"Hours",0);case l:return z(ge+"Minutes",1);case s:return z(ge+"Seconds",2);case n:return z(ge+"Milliseconds",3);default:return this.clone()}},m.endOf=function(S){return this.startOf(S,!1)},m.$set=function(S,D){var y,L=M.p(S),C="set"+(this.$u?"UTC":""),I=(y={},y[c]=C+"Date",y[p]=C+"Date",y[h]=C+"Month",y[f]=C+"FullYear",y[l]=C+"Hours",y[s]=C+"Minutes",y[n]=C+"Seconds",y[i]=C+"Milliseconds",y)[L],z=L===c?this.$D+(D-this.$W):D;if(L===h||L===f){var N=this.clone().set(p,1);N.$d[I](z),N.init(),this.$d=N.set(p,Math.min(this.$D,N.daysInMonth())).$d}else I&&this.$d[I](z);return this.init(),this},m.set=function(S,D){return this.clone().$set(S,D)},m.get=function(S){return this[M.p(S)]()},m.add=function(S,D){var y,L=this;S=Number(S);var C=M.p(D),I=function(Z){var F=E(L);return M.w(F.date(F.date()+Math.round(Z*S)),L)};if(C===h)return this.set(h,this.$M+S);if(C===f)return this.set(f,this.$y+S);if(C===c)return I(1);if(C===u)return I(7);var z=(y={},y[s]=t,y[l]=a,y[n]=e,y)[C]||1,N=this.$d.getTime()+S*z;return M.w(N,this)},m.subtract=function(S,D){return this.add(-1*S,D)},m.format=function(S){var D=this,y=this.$locale();if(!this.isValid())return y.invalidDate||v;var L=S||"YYYY-MM-DDTHH:mm:ssZ",C=M.z(this),I=this.$H,z=this.$m,N=this.$M,Z=y.weekdays,F=y.months,ge=y.meridiem,ie=function(G,Q,pe,ve){return G&&(G[Q]||G(D,L))||pe[Q].slice(0,ve)},oe=function(G){return M.s(I%12||12,G,"0")},se=ge||function(G,Q,pe){var ve=G<12?"AM":"PM";return pe?ve.toLowerCase():ve};return L.replace(b,function(G,Q){return Q||function(pe){switch(pe){case"YY":return String(D.$y).slice(-2);case"YYYY":return M.s(D.$y,4,"0");case"M":return N+1;case"MM":return M.s(N+1,2,"0");case"MMM":return ie(y.monthsShort,N,F,3);case"MMMM":return ie(F,N);case"D":return D.$D;case"DD":return M.s(D.$D,2,"0");case"d":return String(D.$W);case"dd":return ie(y.weekdaysMin,D.$W,Z,2);case"ddd":return ie(y.weekdaysShort,D.$W,Z,3);case"dddd":return Z[D.$W];case"H":return String(I);case"HH":return M.s(I,2,"0");case"h":return oe(1);case"hh":return oe(2);case"a":return se(I,z,!0);case"A":return se(I,z,!1);case"m":return String(z);case"mm":return M.s(z,2,"0");case"s":return String(D.$s);case"ss":return M.s(D.$s,2,"0");case"SSS":return M.s(D.$ms,3,"0");case"Z":return C}return null}(G)||C.replace(":","")})},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(S,D,y){var L,C=this,I=M.p(D),z=E(S),N=(z.utcOffset()-this.utcOffset())*t,Z=this-z,F=function(){return M.m(C,z)};switch(I){case f:L=F()/12;break;case h:L=F();break;case d:L=F()/3;break;case u:L=(Z-N)/6048e5;break;case c:L=(Z-N)/864e5;break;case l:L=Z/a;break;case s:L=Z/t;break;case n:L=Z/e;break;default:L=Z}return y?L:M.a(L)},m.daysInMonth=function(){return this.endOf(h).$D},m.$locale=function(){return T[this.$L]},m.locale=function(S,D){if(!S)return this.$L;var y=this.clone(),L=$(S,D,!0);return L&&(y.$L=L),y},m.clone=function(){return M.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},A}(),R=V.prototype;return E.prototype=R,[["$ms",i],["$s",n],["$m",s],["$H",l],["$W",c],["$M",h],["$y",f],["$D",p]].forEach(function(A){R[A[1]]=function(m){return this.$g(m,A[0],A[1])}}),E.extend=function(A,m){return A.$i||(A(m,V,E),A.$i=!0),E},E.locale=$,E.isDayjs=k,E.unix=function(A){return E(1e3*A)},E.en=T[w],E.Ls=T,E.p={},E})}(at)),at.exports}var Za=zr();const qt=_r(Za);var nt={exports:{}},Wa=nt.exports,Jt;function Ha(){return Jt||(Jt=1,function(o,r){(function(e,t){o.exports=t()})(Wa,function(){var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},t=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,a=/\d/,i=/\d\d/,n=/\d\d?/,s=/\d*[^-_:/,()\s\d]+/,l={},c=function(g){return(g=+g)+(g>68?1900:2e3)},u=function(g){return function(b){this[g]=+b}},h=[/[+-]\d\d:?(\d\d)?|Z/,function(g){(this.zone||(this.zone={})).offset=function(b){if(!b||b==="Z")return 0;var _=b.match(/([+-]|\d\d)/g),x=60*_[1]+(+_[2]||0);return x===0?0:_[0]==="+"?-x:x}(g)}],d=function(g){var b=l[g];return b&&(b.indexOf?b:b.s.concat(b.f))},f=function(g,b){var _,x=l.meridiem;if(x){for(var O=1;O<=24;O+=1)if(g.indexOf(x(O,0,b))>-1){_=O>12;break}}else _=g===(b?"pm":"PM");return _},p={A:[s,function(g){this.afternoon=f(g,!1)}],a:[s,function(g){this.afternoon=f(g,!0)}],Q:[a,function(g){this.month=3*(g-1)+1}],S:[a,function(g){this.milliseconds=100*+g}],SS:[i,function(g){this.milliseconds=10*+g}],SSS:[/\d{3}/,function(g){this.milliseconds=+g}],s:[n,u("seconds")],ss:[n,u("seconds")],m:[n,u("minutes")],mm:[n,u("minutes")],H:[n,u("hours")],h:[n,u("hours")],HH:[n,u("hours")],hh:[n,u("hours")],D:[n,u("day")],DD:[i,u("day")],Do:[s,function(g){var b=l.ordinal,_=g.match(/\d+/);if(this.day=_[0],b)for(var x=1;x<=31;x+=1)b(x).replace(/\[|\]/g,"")===g&&(this.day=x)}],w:[n,u("week")],ww:[i,u("week")],M:[n,u("month")],MM:[i,u("month")],MMM:[s,function(g){var b=d("months"),_=(d("monthsShort")||b.map(function(x){return x.slice(0,3)})).indexOf(g)+1;if(_<1)throw new Error;this.month=_%12||_}],MMMM:[s,function(g){var b=d("months").indexOf(g)+1;if(b<1)throw new Error;this.month=b%12||b}],Y:[/[+-]?\d+/,u("year")],YY:[i,function(g){this.year=c(g)}],YYYY:[/\d{4}/,u("year")],Z:h,ZZ:h};function v(g){var b,_;b=g,_=l&&l.formats;for(var x=(g=b.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(E,M,V){var R=V&&V.toUpperCase();return M||_[V]||e[V]||_[R].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(A,m,S){return m||S.slice(1)})})).match(t),O=x.length,w=0;w<O;w+=1){var T=x[w],P=p[T],k=P&&P[0],$=P&&P[1];x[w]=$?{regex:k,parser:$}:T.replace(/^\[|\]$/g,"")}return function(E){for(var M={},V=0,R=0;V<O;V+=1){var A=x[V];if(typeof A=="string")R+=A.length;else{var m=A.regex,S=A.parser,D=E.slice(R),y=m.exec(D)[0];S.call(M,y),E=E.replace(y,"")}}return function(L){var C=L.afternoon;if(C!==void 0){var I=L.hours;C?I<12&&(L.hours+=12):I===12&&(L.hours=0),delete L.afternoon}}(M),M}}return function(g,b,_){_.p.customParseFormat=!0,g&&g.parseTwoDigitYear&&(c=g.parseTwoDigitYear);var x=b.prototype,O=x.parse;x.parse=function(w){var T=w.date,P=w.utc,k=w.args;this.$u=P;var $=k[1];if(typeof $=="string"){var E=k[2]===!0,M=k[3]===!0,V=E||M,R=k[2];M&&(R=k[2]),l=this.$locale(),!E&&R&&(l=_.Ls[R]),this.$d=function(D,y,L,C){try{if(["x","X"].indexOf(y)>-1)return new Date((y==="X"?1e3:1)*D);var I=v(y)(D),z=I.year,N=I.month,Z=I.day,F=I.hours,ge=I.minutes,ie=I.seconds,oe=I.milliseconds,se=I.zone,G=I.week,Q=new Date,pe=Z||(z||N?1:Q.getDate()),ve=z||Q.getFullYear(),Oe=0;z&&!N||(Oe=N>0?N-1:Q.getMonth());var be,_e=F||0,we=ge||0,Ve=ie||0,Se=oe||0;return se?new Date(Date.UTC(ve,Oe,pe,_e,we,Ve,Se+60*se.offset*1e3)):L?new Date(Date.UTC(ve,Oe,pe,_e,we,Ve,Se)):(be=new Date(ve,Oe,pe,_e,we,Ve,Se),G&&(be=C(be).week(G).toDate()),be)}catch{return new Date("")}}(T,$,P,_),this.init(),R&&R!==!0&&(this.$L=this.locale(R).$L),V&&T!=this.format($)&&(this.$d=new Date("")),l={}}else if($ instanceof Array)for(var A=$.length,m=1;m<=A;m+=1){k[1]=$[m-1];var S=_.apply(this,k);if(S.isValid()){this.$d=S.$d,this.$L=S.$L,this.init();break}m===A&&(this.$d=new Date(""))}else O.call(this,w)}}})}(nt)),nt.exports}var Ga=Ha();const Fa=_r(Ga);var it={exports:{}},Xa=it.exports,Kt;function ja(){return Kt||(Kt=1,function(o,r){(function(e,t){o.exports=t(zr())})(Xa,function(e){function t(h){return h&&typeof h=="object"&&"default"in h?h:{default:h}}var a=t(e),i="січня_лютого_березня_квітня_травня_червня_липня_серпня_вересня_жовтня_листопада_грудня".split("_"),n="січень_лютий_березень_квітень_травень_червень_липень_серпень_вересень_жовтень_листопад_грудень".split("_"),s=/D[oD]?(\[[^[\]]*\]|\s)+MMMM?/;function l(h,d,f){var p,v;return f==="m"?d?"хвилина":"хвилину":f==="h"?d?"година":"годину":h+" "+(p=+h,v={ss:d?"секунда_секунди_секунд":"секунду_секунди_секунд",mm:d?"хвилина_хвилини_хвилин":"хвилину_хвилини_хвилин",hh:d?"година_години_годин":"годину_години_годин",dd:"день_дні_днів",MM:"місяць_місяці_місяців",yy:"рік_роки_років"}[f].split("_"),p%10==1&&p%100!=11?v[0]:p%10>=2&&p%10<=4&&(p%100<10||p%100>=20)?v[1]:v[2])}var c=function(h,d){return s.test(d)?i[h.month()]:n[h.month()]};c.s=n,c.f=i;var u={name:"uk",weekdays:"неділя_понеділок_вівторок_середа_четвер_п’ятниця_субота".split("_"),weekdaysShort:"ндл_пнд_втр_срд_чтв_птн_сбт".split("_"),weekdaysMin:"нд_пн_вт_ср_чт_пт_сб".split("_"),months:c,monthsShort:"січ_лют_бер_квіт_трав_черв_лип_серп_вер_жовт_лист_груд".split("_"),weekStart:1,relativeTime:{future:"за %s",past:"%s тому",s:"декілька секунд",m:l,mm:l,h:l,hh:l,d:"день",dd:l,M:"місяць",MM:l,y:"рік",yy:l},ordinal:function(h){return h},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY р.",LLL:"D MMMM YYYY р., HH:mm",LLLL:"dddd, D MMMM YYYY р., HH:mm"}};return a.default.locale(u,null,!0),u})}(it)),it.exports}ja();function $r(o,r,e,t,a,i,n,s){var l=a-o,c=i-r,u=e-o,h=t-r,d=Math.sqrt(u*u+h*h);u/=d,h/=d;var f=l*u+c*h,p=f/d;p*=d;var v=n[0]=o+p*u,g=n[1]=r+p*h;return Math.sqrt((v-a)*(v-a)+(g-i)*(g-i))}var Ae=new X,H=new X,U=new X,De=new X,Me=new X,lt=[],te=new X;function Ua(o,r){if(r<=180&&r>0){r=r/180*Math.PI,Ae.fromArray(o[0]),H.fromArray(o[1]),U.fromArray(o[2]),X.sub(De,Ae,H),X.sub(Me,U,H);var e=De.len(),t=Me.len();if(!(e<.001||t<.001)){De.scale(1/e),Me.scale(1/t);var a=De.dot(Me),i=Math.cos(r);if(i<a){var n=$r(H.x,H.y,U.x,U.y,Ae.x,Ae.y,lt);te.fromArray(lt),te.scaleAndAdd(Me,n/Math.tan(Math.PI-r));var s=U.x!==H.x?(te.x-H.x)/(U.x-H.x):(te.y-H.y)/(U.y-H.y);if(isNaN(s))return;s<0?X.copy(te,H):s>1&&X.copy(te,U),te.toArray(o[1])}}}}function qa(o,r,e){if(e<=180&&e>0){e=e/180*Math.PI,Ae.fromArray(o[0]),H.fromArray(o[1]),U.fromArray(o[2]),X.sub(De,H,Ae),X.sub(Me,U,H);var t=De.len(),a=Me.len();if(!(t<.001||a<.001)){De.scale(1/t),Me.scale(1/a);var i=De.dot(r),n=Math.cos(e);if(i<n){var s=$r(H.x,H.y,U.x,U.y,Ae.x,Ae.y,lt);te.fromArray(lt);var l=Math.PI/2,c=Math.acos(Me.dot(r)),u=l+c-e;if(u>=l)X.copy(te,U);else{te.scaleAndAdd(Me,s/Math.tan(Math.PI/2-u));var h=U.x!==H.x?(te.x-H.x)/(U.x-H.x):(te.y-H.y)/(U.y-H.y);if(isNaN(h))return;h<0?X.copy(te,H):h>1&&X.copy(te,U)}te.toArray(o[1])}}}}function vt(o,r,e,t){var a=e==="normal",i=a?o:o.ensureState(e);i.ignore=r;var n=t.get("smooth");n&&n===!0&&(n=.3),i.shape=i.shape||{},n>0&&(i.shape.smooth=n);var s=t.getModel("lineStyle").getLineStyle();a?o.useStyle(s):i.style=s}function Ja(o,r){var e=r.smooth,t=r.points;if(t)if(o.moveTo(t[0][0],t[0][1]),e>0&&t.length>=3){var a=Wt(t[0],t[1]),i=Wt(t[1],t[2]);if(!a||!i){o.lineTo(t[1][0],t[1][1]),o.lineTo(t[2][0],t[2][1]);return}var n=Math.min(a,i)*e,s=gt([],t[1],t[0],n/a),l=gt([],t[1],t[2],n/i),c=gt([],s,l,.5);o.bezierCurveTo(s[0],s[1],s[0],s[1],c[0],c[1]),o.bezierCurveTo(l[0],l[1],l[0],l[1],t[2][0],t[2][1])}else for(var u=1;u<t.length;u++)o.lineTo(t[u][0],t[u][1])}function Ka(o,r,e){var t=o.getTextGuideLine(),a=o.getTextContent();if(!a){t&&o.removeTextGuideLine();return}for(var i=r.normal,n=i.get("show"),s=a.ignore,l=0;l<Yt.length;l++){var c=Yt[l],u=r[c],h=c==="normal";if(u){var d=u.get("show"),f=h?s:At(a.states[c]&&a.states[c].ignore,s);if(f||!At(d,n)){var p=h?t:t&&t.states[c];p&&(p.ignore=!0),t&&vt(t,!0,c,u);continue}t||(t=new kt,o.setTextGuideLine(t),!h&&(s||!n)&&vt(t,!0,"normal",r.normal),o.stateProxy&&(t.stateProxy=o.stateProxy)),vt(t,!1,c,u)}}if(t){Sr(t.style,e),t.style.fill=null;var v=i.get("showAbove"),g=o.textGuideLineConfig=o.textGuideLineConfig||{};g.showAbove=v||!1,t.buildPath=Ja}}function Qa(o,r){r=r||"labelLine";for(var e={normal:o.getModel(r)},t=0;t<Zt.length;t++){var a=Zt[t];e[a]=o.getModel([a,r])}return e}var Ot=function(o){ne(r,o);function r(){var e=o!==null&&o.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.getInitialData=function(e,t){return xr(null,this,{useEncodeDefaulter:!0})},r.prototype.getMarkerPosition=function(e,t,a){var i=this.coordinateSystem;if(i&&i.clampData){var n=i.clampData(e),s=i.dataToPoint(n);if(a)Y(i.getAxes(),function(d,f){if(d.type==="category"&&t!=null){var p=d.getTicksCoords(),v=d.getTickModel().get("alignWithLabel"),g=n[f],b=t[f]==="x1"||t[f]==="y1";if(b&&!v&&(g+=1),p.length<2)return;if(p.length===2){s[f]=d.toGlobalCoord(d.getExtent()[b?1:0]);return}for(var _=void 0,x=void 0,O=1,w=0;w<p.length;w++){var T=p[w].coord,P=w===p.length-1?p[w-1].tickValue+O:p[w].tickValue;if(P===g){x=T;break}else if(P<g)_=T;else if(_!=null&&P>g){x=(T+_)/2;break}w===1&&(O=P-p[0].tickValue)}x==null&&(_?_&&(x=p[p.length-1].coord):x=p[0].coord),s[f]=d.toGlobalCoord(x)}});else{var l=this.getData(),c=l.getLayout("offset"),u=l.getLayout("size"),h=i.getBaseAxis().isHorizontal()?0:1;s[h]+=c+u/2}return s}return[NaN,NaN]},r.type="series.__base_bar__",r.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod",defaultBarGap:"10%"},r}(It);It.registerClass(Ot);var en=function(o){ne(r,o);function r(){var e=o!==null&&o.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.getInitialData=function(){return xr(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},r.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},r.prototype.getProgressiveThreshold=function(){var e=this.get("progressiveThreshold"),t=this.get("largeThreshold");return t>e&&(e=t),e},r.prototype.brushSelector=function(e,t,a){return a.rect(t.getItemLayout(e))},r.type="series.bar",r.dependencies=["grid","polar"],r.defaultOption=Tt(Ot.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:ee.color.primary,borderWidth:2}},realtimeSort:!1}),r}(Ot),tn=function(){function o(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return o}(),Qt=function(o){ne(r,o);function r(e){var t=o.call(this,e)||this;return t.type="sausage",t}return r.prototype.getDefaultShape=function(){return new tn},r.prototype.buildPath=function(e,t){var a=t.cx,i=t.cy,n=Math.max(t.r0||0,0),s=Math.max(t.r,0),l=(s-n)*.5,c=n+l,u=t.startAngle,h=t.endAngle,d=t.clockwise,f=Math.PI*2,p=d?h-u<f:u-h<f;p||(u=h-(d?f:-f));var v=Math.cos(u),g=Math.sin(u),b=Math.cos(h),_=Math.sin(h);p?(e.moveTo(v*n+a,g*n+i),e.arc(v*c+a,g*c+i,l,-Math.PI+u,u,!d)):e.moveTo(v*s+a,g*s+i),e.arc(a,i,s,u,h,!d),e.arc(b*c+a,_*c+i,l,h-Math.PI*2,h-Math.PI,!d),n!==0&&e.arc(a,i,n,h,u,d)},r}(Mr);function rn(o,r){r=r||{};var e=r.isRoundCap;return function(t,a,i){var n=a.position;if(!n||n instanceof Array)return Ht(t,a,i);var s=o(n),l=a.distance!=null?a.distance:5,c=this.shape,u=c.cx,h=c.cy,d=c.r,f=c.r0,p=(d+f)/2,v=c.startAngle,g=c.endAngle,b=(v+g)/2,_=e?Math.abs(d-f)/2:0,x=Math.cos,O=Math.sin,w=u+d*x(v),T=h+d*O(v),P="left",k="top";switch(s){case"startArc":w=u+(f-l)*x(b),T=h+(f-l)*O(b),P="center",k="top";break;case"insideStartArc":w=u+(f+l)*x(b),T=h+(f+l)*O(b),P="center",k="bottom";break;case"startAngle":w=u+p*x(v)+Ke(v,l+_,!1),T=h+p*O(v)+Qe(v,l+_,!1),P="right",k="middle";break;case"insideStartAngle":w=u+p*x(v)+Ke(v,-l+_,!1),T=h+p*O(v)+Qe(v,-l+_,!1),P="left",k="middle";break;case"middle":w=u+p*x(b),T=h+p*O(b),P="center",k="middle";break;case"endArc":w=u+(d+l)*x(b),T=h+(d+l)*O(b),P="center",k="bottom";break;case"insideEndArc":w=u+(d-l)*x(b),T=h+(d-l)*O(b),P="center",k="top";break;case"endAngle":w=u+p*x(g)+Ke(g,l+_,!0),T=h+p*O(g)+Qe(g,l+_,!0),P="left",k="middle";break;case"insideEndAngle":w=u+p*x(g)+Ke(g,-l+_,!0),T=h+p*O(g)+Qe(g,-l+_,!0),P="right",k="middle";break;default:return Ht(t,a,i)}return t=t||{},t.x=w,t.y=T,t.align=P,t.verticalAlign=k,t}}function an(o,r,e,t){if(Rt(t)){o.setTextConfig({rotation:t});return}else if(Pt(r)){o.setTextConfig({rotation:0});return}var a=o.shape,i=a.clockwise?a.startAngle:a.endAngle,n=a.clockwise?a.endAngle:a.startAngle,s=(i+n)/2,l,c=e(r);switch(c){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":l=s;break;case"startAngle":case"insideStartAngle":l=i;break;case"endAngle":case"insideEndAngle":l=n;break;default:o.setTextConfig({rotation:0});return}var u=Math.PI*1.5-l;c==="middle"&&u>Math.PI/2&&u<Math.PI*1.5&&(u-=Math.PI),o.setTextConfig({rotation:u})}function Ke(o,r,e){return r*Math.sin(o)*(e?-1:1)}function Qe(o,r,e){return r*Math.cos(o)*(e?1:-1)}function Ge(o,r,e){var t=o.get("borderRadius");if(t==null)return e?{cornerRadius:0}:null;Pt(t)||(t=[t,t,t,t]);var a=Math.abs(r.r||0-r.r0||0);return{cornerRadius:Et(t,function(i){return Jr(i,a)})}}var mt=Math.max,yt=Math.min;function nn(o,r){var e=o.getArea&&o.getArea();if(Dr(o,"cartesian2d")){var t=o.getBaseAxis();if(t.type!=="category"||!t.onBand){var a=r.getLayout("bandWidth");t.isHorizontal()?(e.x-=a,e.width+=a*2):(e.y-=a,e.height+=a*2)}}return e}var on=function(o){ne(r,o);function r(){var e=o.call(this)||this;return e.type=r.type,e._isFirstFrame=!0,e}return r.prototype.render=function(e,t,a,i){this._model=e,this._removeOnRenderedListener(a),this._updateDrawMode(e);var n=e.get("coordinateSystem");(n==="cartesian2d"||n==="polar")&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(e,t,a):this._renderNormal(e,t,a,i))},r.prototype.incrementalPrepareRender=function(e){this._clear(),this._updateDrawMode(e),this._updateLargeClip(e)},r.prototype.incrementalRender=function(e,t){this._progressiveEls=[],this._incrementalRenderLarge(e,t)},r.prototype.eachRendered=function(e){Kr(this._progressiveEls||this.group,e)},r.prototype._updateDrawMode=function(e){var t=e.pipelineContext.large;(this._isLargeDraw==null||t!==this._isLargeDraw)&&(this._isLargeDraw=t,this._clear())},r.prototype._renderNormal=function(e,t,a,i){var n=this.group,s=e.getData(),l=this._data,c=e.coordinateSystem,u=c.getBaseAxis(),h;c.type==="cartesian2d"?h=u.isHorizontal():c.type==="polar"&&(h=u.dim==="angle");var d=e.isAnimationEnabled()?e:null,f=sn(e,c);f&&this._enableRealtimeSort(f,s,a);var p=e.get("clip",!0)||f,v=nn(c,s);n.removeClipPath();var g=e.get("roundCap",!0),b=e.get("showBackground",!0),_=e.getModel("backgroundStyle"),x=_.get("borderRadius")||0,O=[],w=this._backgroundEls,T=i&&i.isInitSort,P=i&&i.type==="changeAxisOrder";function k(M){var V=et[c.type](s,M);if(!V)return null;var R=pn(c,h,V);return R.useStyle(_.getItemStyle()),c.type==="cartesian2d"?R.setShape("r",x):R.setShape("cornerRadius",x),O[M]=R,R}s.diff(l).add(function(M){var V=s.getItemModel(M),R=et[c.type](s,M,V);if(R&&(b&&k(M),!(!s.hasValue(M)||!nr[c.type](R)))){var A=!1;p&&(A=er[c.type](v,R));var m=tr[c.type](e,s,M,R,h,d,u.model,!1,g);f&&(m.forceLabelAnimation=!0),ir(m,s,M,V,R,e,h,c.type==="polar"),T?m.attr({shape:R}):f?rr(f,d,m,R,M,h,!1,!1):ke(m,{shape:R},e,M),s.setItemGraphicEl(M,m),n.add(m),m.ignore=A}}).update(function(M,V){var R=s.getItemModel(M),A=et[c.type](s,M,R);if(A){if(b){var m=void 0;w.length===0?m=k(V):(m=w[V],m.useStyle(_.getItemStyle()),c.type==="cartesian2d"?m.setShape("r",x):m.setShape("cornerRadius",x),O[M]=m);var S=et[c.type](s,M),D=Nr(h,S,c);Ie(m,{shape:D},d,M)}var y=l.getItemGraphicEl(V);if(!s.hasValue(M)||!nr[c.type](A)){n.remove(y);return}var L=!1;p&&(L=er[c.type](v,A),L&&n.remove(y));var C=y&&(y.type==="sector"&&g||y.type==="sausage"&&!g);if(C&&(y&&rt(y,e,V),y=null),y?wr(y):y=tr[c.type](e,s,M,A,h,d,u.model,!0,g),f&&(y.forceLabelAnimation=!0),P){var I=y.getTextContent();if(I){var z=Qr(I);z.prevValue!=null&&(z.prevValue=z.value)}}else ir(y,s,M,R,A,e,h,c.type==="polar");T?y.attr({shape:A}):f?rr(f,d,y,A,M,h,!0,P):Ie(y,{shape:A},e,M,null),s.setItemGraphicEl(M,y),y.ignore=L,n.add(y)}}).remove(function(M){var V=l.getItemGraphicEl(M);V&&rt(V,e,M)}).execute();var $=this._backgroundGroup||(this._backgroundGroup=new Dt);$.removeAll();for(var E=0;E<O.length;++E)$.add(O[E]);n.add($),this._backgroundEls=O,this._data=s},r.prototype._renderLarge=function(e,t,a){this._clear(),sr(e,this.group),this._updateLargeClip(e)},r.prototype._incrementalRenderLarge=function(e,t){this._removeBackground(),sr(t,this.group,this._progressiveEls,!0)},r.prototype._updateLargeClip=function(e){var t=e.get("clip",!0)&&ea(e.coordinateSystem,!1,e),a=this.group;t?a.setClipPath(t):a.removeClipPath()},r.prototype._enableRealtimeSort=function(e,t,a){var i=this;if(t.count()){var n=e.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(t,e,a),this._isFirstFrame=!1;else{var s=function(l){var c=t.getItemGraphicEl(l),u=c&&c.shape;return u&&Math.abs(n.isHorizontal()?u.height:u.width)||0};this._onRendered=function(){i._updateSortWithinSameData(t,s,n,a)},a.getZr().on("rendered",this._onRendered)}}},r.prototype._dataSort=function(e,t,a){var i=[];return e.each(e.mapDimension(t.dim),function(n,s){var l=a(s);l=l??NaN,i.push({dataIndex:s,mappedValue:l,ordinalNumber:n})}),i.sort(function(n,s){return s.mappedValue-n.mappedValue}),{ordinalNumbers:Et(i,function(n){return n.ordinalNumber})}},r.prototype._isOrderChangedWithinSameData=function(e,t,a){for(var i=a.scale,n=e.mapDimension(a.dim),s=Number.MAX_VALUE,l=0,c=i.getOrdinalMeta().categories.length;l<c;++l){var u=e.rawIndexOf(n,i.getRawOrdinalNumber(l)),h=u<0?Number.MIN_VALUE:t(e.indexOfRawIndex(u));if(h>s)return!0;s=h}return!1},r.prototype._isOrderDifferentInView=function(e,t){for(var a=t.scale,i=a.getExtent(),n=Math.max(0,i[0]),s=Math.min(i[1],a.getOrdinalMeta().categories.length-1);n<=s;++n)if(e.ordinalNumbers[n]!==a.getRawOrdinalNumber(n))return!0},r.prototype._updateSortWithinSameData=function(e,t,a,i){if(this._isOrderChangedWithinSameData(e,t,a)){var n=this._dataSort(e,a,t);this._isOrderDifferentInView(n,a)&&(this._removeOnRenderedListener(i),i.dispatchAction({type:"changeAxisOrder",componentType:a.dim+"Axis",axisId:a.index,sortInfo:n}))}},r.prototype._dispatchInitSort=function(e,t,a){var i=t.baseAxis,n=this._dataSort(e,i,function(s){return e.get(e.mapDimension(t.otherAxis.dim),s)});a.dispatchAction({type:"changeAxisOrder",componentType:i.dim+"Axis",isInitSort:!0,axisId:i.index,sortInfo:n})},r.prototype.remove=function(e,t){this._clear(this._model),this._removeOnRenderedListener(t)},r.prototype.dispose=function(e,t){this._removeOnRenderedListener(t)},r.prototype._removeOnRenderedListener=function(e){this._onRendered&&(e.getZr().off("rendered",this._onRendered),this._onRendered=null)},r.prototype._clear=function(e){var t=this.group,a=this._data;e&&e.isAnimationEnabled()&&a&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],a.eachItemGraphicEl(function(i){rt(i,e,zt(i).dataIndex)})):t.removeAll(),this._data=null,this._isFirstFrame=!0},r.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},r.type="bar",r}(Ar),er={cartesian2d:function(o,r){var e=r.width<0?-1:1,t=r.height<0?-1:1;e<0&&(r.x+=r.width,r.width=-r.width),t<0&&(r.y+=r.height,r.height=-r.height);var a=o.x+o.width,i=o.y+o.height,n=mt(r.x,o.x),s=yt(r.x+r.width,a),l=mt(r.y,o.y),c=yt(r.y+r.height,i),u=s<n,h=c<l;return r.x=u&&n>a?s:n,r.y=h&&l>i?c:l,r.width=u?0:s-n,r.height=h?0:c-l,e<0&&(r.x+=r.width,r.width=-r.width),t<0&&(r.y+=r.height,r.height=-r.height),u||h},polar:function(o,r){var e=r.r0<=r.r?1:-1;if(e<0){var t=r.r;r.r=r.r0,r.r0=t}var a=yt(r.r,o.r),i=mt(r.r0,o.r0);r.r=a,r.r0=i;var n=a-i<0;if(e<0){var t=r.r;r.r=r.r0,r.r0=t}return n}},tr={cartesian2d:function(o,r,e,t,a,i,n,s,l){var c=new $e({shape:ye({},t),z2:1});if(c.__dataIndex=e,c.name="item",i){var u=c.shape,h=a?"height":"width";u[h]=0}return c},polar:function(o,r,e,t,a,i,n,s,l){var c=!a&&l?Qt:ct,u=new c({shape:t,z2:1});u.name="item";var h=Vr(a);if(u.calculateTextPosition=rn(h,{isRoundCap:c===Qt}),i){var d=u.shape,f=a?"r":"endAngle",p={};d[f]=a?t.r0:t.startAngle,p[f]=t[f],(s?Ie:ke)(u,{shape:p},i)}return u}};function sn(o,r){var e=o.get("realtimeSort",!0),t=r.getBaseAxis();if(e&&t.type==="category"&&r.type==="cartesian2d")return{baseAxis:t,otherAxis:r.getOtherAxis(t)}}function rr(o,r,e,t,a,i,n,s){var l,c;i?(c={x:t.x,width:t.width},l={y:t.y,height:t.height}):(c={y:t.y,height:t.height},l={x:t.x,width:t.width}),s||(n?Ie:ke)(e,{shape:l},r,a,null);var u=r?o.baseAxis.model:null;(n?Ie:ke)(e,{shape:c},u,a)}function ar(o,r){for(var e=0;e<r.length;e++)if(!isFinite(o[r[e]]))return!0;return!1}var ln=["x","y","width","height"],un=["cx","cy","r","startAngle","endAngle"],nr={cartesian2d:function(o){return!ar(o,ln)},polar:function(o){return!ar(o,un)}},et={cartesian2d:function(o,r,e){var t=o.getItemLayout(r);if(!t)return null;var a=e?hn(e,t):0,i=t.width>0?1:-1,n=t.height>0?1:-1;return{x:t.x+i*a/2,y:t.y+n*a/2,width:t.width-i*a,height:t.height-n*a}},polar:function(o,r,e){var t=o.getItemLayout(r);return{cx:t.cx,cy:t.cy,r0:t.r0,r:t.r,startAngle:t.startAngle,endAngle:t.endAngle,clockwise:t.clockwise}}};function cn(o){return o.startAngle!=null&&o.endAngle!=null&&o.startAngle===o.endAngle}function Vr(o){return function(r){var e=r?"Arc":"Angle";return function(t){switch(t){case"start":case"insideStart":case"end":case"insideEnd":return t+e;default:return t}}}(o)}function ir(o,r,e,t,a,i,n,s){var l=r.getItemVisual(e,"style");if(s){if(!i.get("roundCap")){var u=o.shape,h=Ge(t.getModel("itemStyle"),u,!0);ye(u,h),o.setShape(u)}}else{var c=t.get(["itemStyle","borderRadius"])||0;o.setShape("r",c)}o.useStyle(l);var d=t.getShallow("cursor");d&&o.attr("cursor",d);var f=s?n?a.r>=a.r0?"endArc":"startArc":a.endAngle>=a.startAngle?"endAngle":"startAngle":n?a.height>=0?"bottom":"top":a.width>=0?"right":"left",p=Lr(t);Cr(o,p,{labelFetcher:i,labelDataIndex:e,defaultText:ta(i.getData(),e),inheritColor:l.fill,defaultOpacity:l.opacity,defaultOutsidePosition:f});var v=o.getTextContent();if(s&&v){var g=t.get(["label","position"]);o.textConfig.inside=g==="middle"?!0:null,an(o,g==="outside"?f:g,Vr(n),t.get(["label","rotate"]))}ra(v,p,i.getRawValue(e),function(_){return na(r,_)});var b=t.getModel(["emphasis"]);Or(o,b.get("focus"),b.get("blurScope"),b.get("disabled")),kr(o,t),cn(a)&&(o.style.fill="none",o.style.stroke="none",Y(o.states,function(_){_.style&&(_.style.fill=_.style.stroke="none")}))}function hn(o,r){var e=o.get(["itemStyle","borderColor"]);if(!e||e==="none")return 0;var t=o.get(["itemStyle","borderWidth"])||0,a=isNaN(r.width)?Number.MAX_VALUE:Math.abs(r.width),i=isNaN(r.height)?Number.MAX_VALUE:Math.abs(r.height);return Math.min(t,a,i)}var dn=function(){function o(){}return o}(),or=function(o){ne(r,o);function r(e){var t=o.call(this,e)||this;return t.type="largeBar",t}return r.prototype.getDefaultShape=function(){return new dn},r.prototype.buildPath=function(e,t){for(var a=t.points,i=this.baseDimIdx,n=1-this.baseDimIdx,s=[],l=[],c=this.barWidth,u=0;u<a.length;u+=3)l[i]=c,l[n]=a[u+2],s[i]=a[u+i],s[n]=a[u+n],e.rect(s[0],s[1],l[0],l[1])},r}(Mr);function sr(o,r,e,t){var a=o.getData(),i=a.getLayout("valueAxisHorizontal")?1:0,n=a.getLayout("largeDataIndices"),s=a.getLayout("size"),l=o.getModel("backgroundStyle"),c=a.getLayout("largeBackgroundPoints");if(c){var u=new or({shape:{points:c},incremental:!!t,silent:!0,z2:0});u.baseDimIdx=i,u.largeDataIndices=n,u.barWidth=s,u.useStyle(l.getItemStyle()),r.add(u),e&&e.push(u)}var h=new or({shape:{points:a.getLayout("largePoints")},incremental:!!t,ignoreCoarsePointer:!0,z2:1});h.baseDimIdx=i,h.largeDataIndices=n,h.barWidth=s,r.add(h),h.useStyle(a.getVisual("style")),h.style.stroke=null,zt(h).seriesIndex=o.seriesIndex,o.get("silent")||(h.on("mousedown",lr),h.on("mousemove",lr)),e&&e.push(h)}var lr=aa(function(o){var r=this,e=fn(r,o.offsetX,o.offsetY);zt(r).dataIndex=e>=0?e:null},30,!1);function fn(o,r,e){for(var t=o.baseDimIdx,a=1-t,i=o.shape.points,n=o.largeDataIndices,s=[],l=[],c=o.barWidth,u=0,h=i.length/3;u<h;u++){var d=u*3;if(l[t]=c,l[a]=i[d+2],s[t]=i[d+t],s[a]=i[d+a],l[a]<0&&(s[a]+=l[a],l[a]=-l[a]),r>=s[0]&&r<=s[0]+l[0]&&e>=s[1]&&e<=s[1]+l[1])return n[u]}return-1}function Nr(o,r,e){if(Dr(e,"cartesian2d")){var t=r,a=e.getArea();return{x:o?t.x:a.x,y:o?a.y:t.y,width:o?t.width:a.width,height:o?a.height:t.height}}else{var a=e.getArea(),i=r;return{cx:a.cx,cy:a.cy,r0:o?a.r0:i.r0,r:o?a.r:i.r,startAngle:o?i.startAngle:0,endAngle:o?i.endAngle:Math.PI*2}}}function pn(o,r,e){var t=o.type==="polar"?ct:$e;return new t({shape:Nr(r,e,o),silent:!0,z2:0})}function gn(o){o.registerChartView(on),o.registerSeriesModel(en),o.registerLayout(o.PRIORITY.VISUAL.LAYOUT,Xe(ia,"bar")),o.registerLayout(o.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,oa("bar")),o.registerProcessor(o.PRIORITY.PROCESSOR.STATISTIC,sa("bar")),o.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(r,e){var t=r.componentType||"series";e.eachComponent({mainType:t,query:r},function(a){r.sortInfo&&a.axis.setCategorySortInfo(r.sortInfo)})})}var ur=Math.PI*2,tt=Math.PI/180;function vn(o,r,e){r.eachSeriesByType(o,function(t){var a=t.getData(),i=a.mapDimension("value"),n=la(t,e),s=n.cx,l=n.cy,c=n.r,u=n.r0,h=n.viewRect,d=-t.get("startAngle")*tt,f=t.get("endAngle"),p=t.get("padAngle")*tt;f=f==="auto"?d-ur:-f*tt;var v=t.get("minAngle")*tt,g=v+p,b=0;a.each(i,function(D){!isNaN(D)&&b++});var _=a.getSum(i),x=Math.PI/(_||b)*2,O=t.get("clockwise"),w=t.get("roseType"),T=t.get("stillShowZeroSum"),P=a.getDataExtent(i);P[0]=0;var k=O?1:-1,$=[d,f],E=k*p/2;ua($,!O),d=$[0],f=$[1];var M=Br(t);M.startAngle=d,M.endAngle=f,M.clockwise=O,M.cx=s,M.cy=l,M.r=c,M.r0=u;var V=Math.abs(f-d),R=V,A=0,m=d;if(a.setLayout({viewRect:h,r:c}),a.each(i,function(D,y){var L;if(isNaN(D)){a.setItemLayout(y,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:O,cx:s,cy:l,r0:u,r:w?NaN:c});return}w!=="area"?L=_===0&&T?x:D*x:L=V/b,L<g?(L=g,R-=g):A+=D;var C=m+k*L,I=0,z=0;p>L?(I=m+k*L/2,z=I):(I=m+E,z=C-E),a.setItemLayout(y,{angle:L,startAngle:I,endAngle:z,clockwise:O,cx:s,cy:l,r0:u,r:w?j(D,P,[u,c]):c}),m=C}),R<ur&&b)if(R<=.001){var S=V/b;a.each(i,function(D,y){if(!isNaN(D)){var L=a.getItemLayout(y);L.angle=S;var C=0,I=0;S<p?(C=d+k*(y+1/2)*S,I=C):(C=d+k*y*S+E,I=d+k*(y+1)*S-E),L.startAngle=C,L.endAngle=I}})}else x=R/A,m=d,a.each(i,function(D,y){if(!isNaN(D)){var L=a.getItemLayout(y),C=L.angle===g?g:D*x,I=0,z=0;C<p?(I=m+k*C/2,z=I):(I=m+E,z=m+k*C-E),L.startAngle=I,L.endAngle=z,m+=k*C}})})}var Br=qe();function mn(o){return{seriesType:o,reset:function(r,e){var t=e.findComponents({mainType:"legend"});if(!(!t||!t.length)){var a=r.getData();a.filterSelf(function(i){for(var n=a.getName(i),s=0;s<t.length;s++)if(!t[s].isSelected(n))return!1;return!0})}}}}var yn=Math.PI/180;function cr(o,r,e,t,a,i,n,s,l,c){if(o.length<2)return;function u(v){for(var g=v.rB,b=g*g,_=0;_<v.list.length;_++){var x=v.list[_],O=Math.abs(x.label.y-e),w=t+x.len,T=w*w,P=Math.sqrt(Math.abs((1-O*O/b)*T)),k=r+(P+x.len2)*a,$=k-x.label.x,E=x.targetTextWidth-$*a;Yr(x,E,!0),x.label.x=k}}function h(v){for(var g={list:[],maxY:0},b={list:[],maxY:0},_=0;_<v.length;_++)if(v[_].labelAlignTo==="none"){var x=v[_],O=x.label.y>e?b:g,w=Math.abs(x.label.y-e);if(w>=O.maxY){var T=x.label.x-r-x.len2*a,P=t+x.len,k=Math.abs(T)<P?Math.sqrt(w*w/(1-T*T/P/P)):P;O.rB=k,O.maxY=w}O.list.push(x)}u(g),u(b)}for(var d=o.length,f=0;f<d;f++)if(o[f].position==="outer"&&o[f].labelAlignTo==="labelLine"){var p=o[f].label.x-c;o[f].linePoints[1][0]+=p,o[f].label.x=c}da(o,1,l,l+n)&&h(o)}function bn(o,r,e,t,a,i,n,s){for(var l=[],c=[],u=Number.MAX_VALUE,h=-Number.MAX_VALUE,d=0;d<o.length;d++){var f=o[d].label;bt(o[d])||(f.x<r?(u=Math.min(u,f.x),l.push(o[d])):(h=Math.max(h,f.x),c.push(o[d])))}for(var d=0;d<o.length;d++){var p=o[d];if(!bt(p)&&p.linePoints){if(p.labelStyleWidth!=null)continue;var f=p.label,v=p.linePoints,g=void 0;p.labelAlignTo==="edge"?f.x<r?g=v[2][0]-p.labelDistance-n-p.edgeDistance:g=n+a-p.edgeDistance-v[2][0]-p.labelDistance:p.labelAlignTo==="labelLine"?f.x<r?g=u-n-p.bleedMargin:g=n+a-h-p.bleedMargin:f.x<r?g=f.x-n-p.bleedMargin:g=n+a-f.x-p.bleedMargin,p.targetTextWidth=g,Yr(p,g,!1)}}cr(c,r,e,t,1,a,i,n,s,h),cr(l,r,e,t,-1,a,i,n,s,u);for(var d=0;d<o.length;d++){var p=o[d];if(!bt(p)&&p.linePoints){var f=p.label,v=p.linePoints,b=p.labelAlignTo==="edge",_=f.style.padding,x=_?_[1]+_[3]:0,O=f.style.backgroundColor?0:x,w=p.rect.width+O,T=v[1][0]-v[2][0];b?f.x<r?v[2][0]=n+p.edgeDistance+w+p.labelDistance:v[2][0]=n+a-p.edgeDistance-w-p.labelDistance:(f.x<r?v[2][0]=f.x+p.labelDistance:v[2][0]=f.x-p.labelDistance,v[1][0]=v[2][0]+T),v[1][1]=v[2][1]=f.y}}}function Yr(o,r,e){if(o.labelStyleWidth==null){var t=o.label,a=t.style,i=o.rect,n=a.backgroundColor,s=a.padding,l=s?s[1]+s[3]:0,c=a.overflow,u=i.width+(n?0:l);if(r<u||e){if(c&&c.match("break")){t.setStyle("backgroundColor",null),t.setStyle("width",r-l);var h=t.getBoundingRect();t.setStyle("width",Math.ceil(h.width)),t.setStyle("backgroundColor",n)}else{var d=r-l,f=r<u?d:e?d>o.unconstrainedWidth?null:d:null;t.setStyle("width",f)}Zr(i,t)}}}function Zr(o,r){hr.rect=o,ha(hr,r,_n)}var _n={minMarginForce:[null,0,null,0],marginDefault:[1,0,1,0]},hr={};function bt(o){return o.position==="center"}function Sn(o){var r=o.getData(),e=[],t,a,i=!1,n=(o.get("minShowLabelAngle")||0)*yn,s=r.getLayout("viewRect"),l=r.getLayout("r"),c=s.width,u=s.x,h=s.y,d=s.height;function f(T){T.ignore=!0}function p(T){if(!T.ignore)return!0;for(var P in T.states)if(T.states[P].ignore===!1)return!0;return!1}r.each(function(T){var P=r.getItemGraphicEl(T),k=P.shape,$=P.getTextContent(),E=P.getTextGuideLine(),M=r.getItemModel(T),V=M.getModel("label"),R=V.get("position")||M.get(["emphasis","label","position"]),A=V.get("distanceToLabelLine"),m=V.get("alignTo"),S=Fe(V.get("edgeDistance"),c),D=V.get("bleedMargin");D==null&&(D=Math.min(c,d)>200?10:2);var y=M.getModel("labelLine"),L=y.get("length");L=Fe(L,c);var C=y.get("length2");if(C=Fe(C,c),Math.abs(k.endAngle-k.startAngle)<n){Y($.states,f),$.ignore=!0,E&&(Y(E.states,f),E.ignore=!0);return}if(p($)){var I=(k.startAngle+k.endAngle)/2,z=Math.cos(I),N=Math.sin(I),Z,F,ge,ie;t=k.cx,a=k.cy;var oe=R==="inside"||R==="inner";if(R==="center")Z=k.cx,F=k.cy,ie="center";else{var se=(oe?(k.r+k.r0)/2*z:k.r*z)+t,G=(oe?(k.r+k.r0)/2*N:k.r*N)+a;if(Z=se+z*3,F=G+N*3,!oe){var Q=se+z*(L+l-k.r),pe=G+N*(L+l-k.r),ve=Q+(z<0?-1:1)*C,Oe=pe;m==="edge"?Z=z<0?u+S:u+c-S:Z=ve+(z<0?-A:A),F=Oe,ge=[[se,G],[Q,pe],[ve,Oe]]}ie=oe?"center":m==="edge"?z>0?"right":"left":z>0?"left":"right"}var be=Math.PI,_e=0,we=V.get("rotate");if(Rt(we))_e=we*(be/180);else if(R==="center")_e=0;else if(we==="radial"||we===!0){var Ve=z<0?-I+be:-I;_e=Ve}else if(we==="tangential"&&R!=="outside"&&R!=="outer"){var Se=Math.atan2(z,N);Se<0&&(Se=be*2+Se);var Nt=N>0;Nt&&(Se=be+Se),_e=Se-be}if(i=!!_e,$.x=Z,$.y=F,$.rotation=_e,$.setStyle({verticalAlign:"middle"}),oe){$.setStyle({align:ie});var ft=$.states.select;ft&&(ft.x+=$.x,ft.y+=$.y)}else{var dt=new ca(0,0,0,0);Zr(dt,$),e.push({label:$,labelLine:E,position:R,len:L,len2:C,minTurnAngle:y.get("minTurnAngle"),maxSurfaceAngle:y.get("maxSurfaceAngle"),surfaceNormal:new X(z,N),linePoints:ge,textAlign:ie,labelDistance:A,labelAlignTo:m,edgeDistance:S,bleedMargin:D,rect:dt,unconstrainedWidth:dt.width,labelStyleWidth:$.style.width})}P.setTextConfig({inside:oe})}}),!i&&o.get("avoidLabelOverlap")&&bn(e,t,a,l,c,d,u,h);for(var v=0;v<e.length;v++){var g=e[v],b=g.label,_=g.labelLine,x=isNaN(b.x)||isNaN(b.y);if(b){b.setStyle({align:g.textAlign}),x&&(Y(b.states,f),b.ignore=!0);var O=b.states.select;O&&(O.x+=b.x,O.y+=b.y)}if(_){var w=g.linePoints;x||!w?(Y(_.states,f),_.ignore=!0):(Ua(w,g.minTurnAngle),qa(w,g.surfaceNormal,g.maxSurfaceAngle),_.setShape({points:w}),b.__hostTarget.textGuideLineConfig={anchor:new X(w[0][0],w[0][1])})}}}var xn=function(o){ne(r,o);function r(e,t,a){var i=o.call(this)||this;i.z2=2;var n=new Tr;return i.setTextContent(n),i.updateData(e,t,a,!0),i}return r.prototype.updateData=function(e,t,a,i){var n=this,s=e.hostModel,l=e.getItemModel(t),c=l.getModel("emphasis"),u=e.getItemLayout(t),h=ye(Ge(l.getModel("itemStyle"),u,!0),u);if(isNaN(h.startAngle)){n.setShape(h);return}if(i){n.setShape(h);var d=s.getShallow("animationType");s.ecModel.ssr?(ke(n,{scaleX:0,scaleY:0},s,{dataIndex:t,isFrom:!0}),n.originX=h.cx,n.originY=h.cy):d==="scale"?(n.shape.r=u.r0,ke(n,{shape:{r:u.r}},s,t)):a!=null?(n.setShape({startAngle:a,endAngle:a}),ke(n,{shape:{startAngle:u.startAngle,endAngle:u.endAngle}},s,t)):(n.shape.endAngle=u.startAngle,Ie(n,{shape:{endAngle:u.endAngle}},s,t))}else wr(n),Ie(n,{shape:h},s,t);n.useStyle(e.getItemVisual(t,"style")),kr(n,l);var f=(u.startAngle+u.endAngle)/2,p=s.get("selectedOffset"),v=Math.cos(f)*p,g=Math.sin(f)*p,b=l.getShallow("cursor");b&&n.attr("cursor",b),this._updateLabel(s,e,t),n.ensureState("emphasis").shape=ye({r:u.r+(c.get("scale")&&c.get("scaleSize")||0)},Ge(c.getModel("itemStyle"),u)),ye(n.ensureState("select"),{x:v,y:g,shape:Ge(l.getModel(["select","itemStyle"]),u)}),ye(n.ensureState("blur"),{shape:Ge(l.getModel(["blur","itemStyle"]),u)});var _=n.getTextGuideLine(),x=n.getTextContent();_&&ye(_.ensureState("select"),{x:v,y:g}),ye(x.ensureState("select"),{x:v,y:g}),Or(this,c.get("focus"),c.get("blurScope"),c.get("disabled"))},r.prototype._updateLabel=function(e,t,a){var i=this,n=t.getItemModel(a),s=n.getModel("labelLine"),l=t.getItemVisual(a,"style"),c=l&&l.fill,u=l&&l.opacity;Cr(i,Lr(n),{labelFetcher:t.hostModel,labelDataIndex:a,inheritColor:c,defaultOpacity:u,defaultText:e.getFormattedLabel(a,"normal")||t.getName(a)});var h=i.getTextContent();i.setTextConfig({position:null,rotation:null}),h.attr({z2:10});var d=n.get(["label","position"]);if(d!=="outside"&&d!=="outer")i.removeTextGuideLine();else{var f=this.getTextGuideLine();f||(f=new kt,this.setTextGuideLine(f)),Ka(this,Qa(n),{stroke:c,opacity:fa(s.get(["lineStyle","opacity"]),u,1)})}},r}(ct),Mn=function(o){ne(r,o);function r(){var e=o!==null&&o.apply(this,arguments)||this;return e.ignoreLabelLineUpdate=!0,e}return r.prototype.render=function(e,t,a,i){var n=e.getData(),s=this._data,l=this.group,c;if(!s&&n.count()>0){for(var u=n.getItemLayout(0),h=1;isNaN(u&&u.startAngle)&&h<n.count();++h)u=n.getItemLayout(h);u&&(c=u.startAngle)}if(this._emptyCircleSector&&l.remove(this._emptyCircleSector),n.count()===0&&e.get("showEmptyCircle")){var d=Br(e),f=new ct({shape:Ir(d)});f.useStyle(e.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=f,l.add(f)}n.diff(s).add(function(p){var v=new xn(n,p,c);n.setItemGraphicEl(p,v),l.add(v)}).update(function(p,v){var g=s.getItemGraphicEl(v);g.updateData(n,p,c),g.off("click"),l.add(g),n.setItemGraphicEl(p,g)}).remove(function(p){var v=s.getItemGraphicEl(p);rt(v,e,p)}).execute(),Sn(e),e.get("animationTypeUpdate")!=="expansion"&&(this._data=n)},r.prototype.dispose=function(){},r.prototype.containPoint=function(e,t){var a=t.getData(),i=a.getItemLayout(0);if(i){var n=e[0]-i.cx,s=e[1]-i.cy,l=Math.sqrt(n*n+s*s);return l<=i.r&&l>=i.r0}},r.type="pie",r}(Ar);function wn(o,r,e){r=Pt(r)&&{coordDimensions:r}||ye({encodeDefine:o.getEncode()},r);var t=o.getSource(),a=pa(t,r).dimensions,i=new ga(a,o);return i.initData(t,e),i}var An=function(){function o(r,e){this._getDataWithEncodedVisual=r,this._getRawData=e}return o.prototype.getAllNames=function(){var r=this._getRawData();return r.mapArray(r.getName)},o.prototype.containName=function(r){var e=this._getRawData();return e.indexOfName(r)>=0},o.prototype.indexOfName=function(r){var e=this._getDataWithEncodedVisual();return e.indexOfName(r)},o.prototype.getItemVisual=function(r,e){var t=this._getDataWithEncodedVisual();return t.getItemVisual(r,e)},o}(),Dn=qe(),Wr=function(o){ne(r,o);function r(){return o!==null&&o.apply(this,arguments)||this}return r.prototype.init=function(e){o.prototype.init.apply(this,arguments),this.legendVisualProvider=new An(W(this.getData,this),W(this.getRawData,this)),this._defaultLabelLine(e)},r.prototype.mergeOption=function(){o.prototype.mergeOption.apply(this,arguments)},r.prototype.getInitialData=function(){return wn(this,{coordDimensions:["value"],encodeDefaulter:Xe(va,this)})},r.prototype.getDataParams=function(e){var t=this.getData(),a=Dn(t),i=a.seats;if(!i){var n=[];t.each(t.mapDimension("value"),function(l){n.push(l)}),i=a.seats=ma(n,t.hostModel.get("percentPrecision"))}var s=o.prototype.getDataParams.call(this,e);return s.percent=i[e]||0,s.$vars.push("percent"),s},r.prototype._defaultLabelLine=function(e){ya(e,"labelLine",["show"]);var t=e.labelLine,a=e.emphasis.labelLine;t.show=t.show&&e.label.show,a.show=a.show&&e.emphasis.label.show},r.type="series.pie",r.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"50%"],clockwise:!0,startAngle:90,endAngle:"auto",padAngle:0,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,coordinateSystemUsage:"box",left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:30,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},r}(It);ba({fullType:Wr.type,getCoord2:function(o){return o.getShallow("center")}});function Ln(o){return{seriesType:o,reset:function(r,e){var t=r.getData();t.filterSelf(function(a){var i=t.mapDimension("value"),n=t.get(i,a);return!(Rt(n)&&!isNaN(n)&&n<0)})}}}function Je(o){o.registerChartView(Mn),o.registerSeriesModel(Wr),_a("pie",o.registerAction),o.registerLayout(Xe(vn,"pie")),o.registerProcessor(mn("pie")),o.registerProcessor(Ln("pie"))}var Cn=qe();function dr(o,r){return!!Cn(o)[r]}Sa({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},xa);var On={axisPointer:1,tooltip:1,brush:1};function kn(o,r,e){var t=r.getComponentByElement(o.topTarget);if(!t||t===e||On.hasOwnProperty(t.mainType))return!1;var a=t.coordinateSystem;if(!a||a.model===e)return!1;var i=Lt(t),n=Lt(e);return!((i.zlevel-n.zlevel||i.z-n.z)<=0)}var In=function(o){ne(r,o);function r(e){var t=o.call(this)||this;t._zr=e;var a=W(t._mousedownHandler,t),i=W(t._mousemoveHandler,t),n=W(t._mouseupHandler,t),s=W(t._mousewheelHandler,t),l=W(t._pinchHandler,t);return t.enable=function(c,u){var h=u.zInfo,d=Lt(h.component),f=d.z,p=d.zlevel,v={component:h.component,z:f,zlevel:p,z2:At(h.z2,-1/0)},g=ye({},u.triggerInfo);this._opt=Sr(ye({},u),{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0,zInfoParsed:v,triggerInfo:g}),c==null&&(c=!0),(!this._enabled||this._controlType!==c)&&(this._enabled=!0,this.disable(),(c===!0||c==="move"||c==="pan")&&(Be(e,"mousedown",a,v),Be(e,"mousemove",i,v),Be(e,"mouseup",n,v)),(c===!0||c==="scale"||c==="zoom")&&(Be(e,"mousewheel",s,v),Be(e,"pinch",l,v)))},t.disable=function(){this._enabled=!1,Ye(e,"mousedown",a),Ye(e,"mousemove",i),Ye(e,"mouseup",n),Ye(e,"mousewheel",s),Ye(e,"pinch",l)},t}return r.prototype.isDragging=function(){return this._dragging},r.prototype.isPinching=function(){return this._pinching},r.prototype._checkPointer=function(e,t,a){var i=this._opt,n=i.zInfoParsed;if(kn(e,i.api,n.component))return!1;var s=i.triggerInfo,l=s.roamTrigger,c=!1;return l==="global"&&(c=!0),c||(c=s.isInSelf(e,t,a)),c&&s.isInClip&&!s.isInClip(e,t,a)&&(c=!1),c},r.prototype._decideCursorStyle=function(e,t,a,i){var n=e.target;if(!n&&this._checkPointer(e,t,a))return"grab";if(i)return n&&n.cursor||"default"},r.prototype.dispose=function(){this.disable()},r.prototype._mousedownHandler=function(e){if(!(Gt(e)||Ne(e))){for(var t=e.target;t;){if(t.draggable)return;t=t.__hostTarget||t.parent}var a=e.offsetX,i=e.offsetY;this._checkPointer(e,a,i)&&(this._x=a,this._y=i,this._dragging=!0)}},r.prototype._mousemoveHandler=function(e){var t=this._zr;if(!(e.gestureEvent==="pinch"||dr(t,"globalPan")||Ne(e))){var a=e.offsetX,i=e.offsetY;if(!this._dragging||!ot("moveOnMouseMove",e,this._opt)){var n=this._decideCursorStyle(e,a,i,!1);n&&t.setCursorStyle(n);return}t.setCursorStyle("grabbing");var s=this._x,l=this._y,c=a-s,u=i-l;this._x=a,this._y=i,this._opt.preventDefaultMouseMove&&st(e.event),e.__ecRoamConsumed=!0,fr(this,"pan","moveOnMouseMove",e,{dx:c,dy:u,oldX:s,oldY:l,newX:a,newY:i,isAvailableBehavior:null})}},r.prototype._mouseupHandler=function(e){if(!Ne(e)){var t=this._zr;if(!Gt(e)){this._dragging=!1;var a=this._decideCursorStyle(e,e.offsetX,e.offsetY,!0);a&&t.setCursorStyle(a)}}},r.prototype._mousewheelHandler=function(e){if(!Ne(e)){var t=ot("zoomOnMouseWheel",e,this._opt),a=ot("moveOnMouseWheel",e,this._opt),i=e.wheelDelta,n=Math.abs(i),s=e.offsetX,l=e.offsetY;if(!(i===0||!t&&!a)){if(t){var c=n>3?1.4:n>1?1.2:1.1,u=i>0?c:1/c;this._checkTriggerMoveZoom(this,"zoom","zoomOnMouseWheel",e,{scale:u,originX:s,originY:l,isAvailableBehavior:null})}if(a){var h=Math.abs(i),d=(i>0?1:-1)*(h>3?.4:h>1?.15:.05);this._checkTriggerMoveZoom(this,"scrollMove","moveOnMouseWheel",e,{scrollDelta:d,originX:s,originY:l,isAvailableBehavior:null})}}}},r.prototype._pinchHandler=function(e){if(!(dr(this._zr,"globalPan")||Ne(e))){var t=e.pinchScale>1?1.1:1/1.1;this._checkTriggerMoveZoom(this,"zoom",null,e,{scale:t,originX:e.pinchX,originY:e.pinchY,isAvailableBehavior:null})}},r.prototype._checkTriggerMoveZoom=function(e,t,a,i,n){e._checkPointer(i,n.originX,n.originY)&&(st(i.event),i.__ecRoamConsumed=!0,fr(e,t,a,i,n))},r}(Ma);function Ne(o){return o.__ecRoamConsumed}var Tn=qe();function ht(o){var r=Tn(o);return r.roam=r.roam||{},r.uniform=r.uniform||{},r}function Be(o,r,e,t){for(var a=ht(o),i=a.roam,n=i[r]=i[r]||[],s=0;s<n.length;s++){var l=n[s].zInfoParsed;if((l.zlevel-t.zlevel||l.z-t.z||l.z2-t.z2)<=0)break}n.splice(s,0,{listener:e,zInfoParsed:t}),Rn(o,r)}function Ye(o,r,e){for(var t=ht(o),a=t.roam[r]||[],i=0;i<a.length;i++)if(a[i].listener===e){a.splice(i,1),a.length||Pn(o,r);return}}function Rn(o,r){var e=ht(o);e.uniform[r]||o.on(r,e.uniform[r]=function(t){var a=e.roam[r];if(a)for(var i=0;i<a.length;i++)a[i].listener(t)})}function Pn(o,r){var e=ht(o),t=e.uniform;t[r]&&(o.off(r,t[r]),t[r]=null)}function fr(o,r,e,t,a){a.isAvailableBehavior=W(ot,null,e,t),o.trigger(r,a)}function ot(o,r,e){var t=e[o];return!o||t&&(!Rr(t)||r.event[t+"Key"])}function je(o,r,e,t,a,i){o=o||0;var n=e[1]-e[0];if(a!=null&&(a=Ee(a,[0,n])),i!=null&&(i=Math.max(i,a??0)),t==="all"){var s=Math.abs(r[1]-r[0]);s=Ee(s,[0,n]),a=i=Ee(s,[a,i]),t=0}r[0]=Ee(r[0],e),r[1]=Ee(r[1],e);var l=_t(r,t);r[t]+=o;var c=a||0,u=e.slice();l.sign<0?u[0]+=c:u[1]-=c,r[t]=Ee(r[t],u);var h;return h=_t(r,t),a!=null&&(h.sign!==l.sign||h.span<a)&&(r[1-t]=r[t]+l.sign*a),h=_t(r,t),i!=null&&h.span>i&&(r[1-t]=r[t]+h.sign*i),r}function _t(o,r){var e=o[r]-o[1-r];return{span:Math.abs(e),sign:e>0?-1:e<0?1:r?-1:1}}function Ee(o,r){return Math.min(r[1]!=null?r[1]:1/0,Math.max(r[0]!=null?r[0]:-1/0,o))}var pr=["x","y","radius","angle","single"],En=["cartesian2d","polar","singleAxis"];function zn(o){var r=o.get("coordinateSystem");return Pr(En,r)>=0}function Le(o){return o+"Axis"}function $n(o,r){var e=Te(),t=[],a=Te();o.eachComponent({mainType:"dataZoom",query:r},function(u){a.get(u.uid)||s(u)});var i;do i=!1,o.eachComponent("dataZoom",n);while(i);function n(u){!a.get(u.uid)&&l(u)&&(s(u),i=!0)}function s(u){a.set(u.uid,!0),t.push(u),c(u)}function l(u){var h=!1;return u.eachTargetAxis(function(d,f){var p=e.get(d);p&&p[f]&&(h=!0)}),h}function c(u){u.eachTargetAxis(function(h,d){(e.get(h)||e.set(h,[]))[d]=!0})}return t}function Hr(o){var r=o.ecModel,e={infoList:[],infoMap:Te()};return o.eachTargetAxis(function(t,a){var i=r.getComponent(Le(t),a);if(i){var n=i.getCoordSysModel();if(n){var s=n.uid,l=e.infoMap.get(s);l||(l={model:n,axisModels:[]},e.infoList.push(l),e.infoMap.set(s,l)),l.axisModels.push(i)}}}),e}var St=function(){function o(){this.indexList=[],this.indexMap=[]}return o.prototype.add=function(r){this.indexMap[r]||(this.indexList.push(r),this.indexMap[r]=!0)},o}(),ut=function(o){ne(r,o);function r(){var e=o!==null&&o.apply(this,arguments)||this;return e.type=r.type,e._autoThrottle=!0,e._noTarget=!0,e._rangePropMode=["percent","percent"],e}return r.prototype.init=function(e,t,a){var i=gr(e);this.settledOption=i,this.mergeDefaultAndTheme(e,a),this._doInit(i)},r.prototype.mergeOption=function(e){var t=gr(e);Ft(this.option,e,!0),Ft(this.settledOption,t,!0),this._doInit(t)},r.prototype._doInit=function(e){var t=this.option;this._setDefaultThrottle(e),this._updateRangeUse(e);var a=this.settledOption;Y([["start","startValue"],["end","endValue"]],function(i,n){this._rangePropMode[n]==="value"&&(t[i[0]]=a[i[0]]=null)},this),this._resetTarget()},r.prototype._resetTarget=function(){var e=this.get("orient",!0),t=this._targetAxisInfoMap=Te(),a=this._fillSpecifiedTargetAxis(t);a?this._orient=e||this._makeAutoOrientByTargetAxis():(this._orient=e||"horizontal",this._fillAutoTargetAxisByOrient(t,this._orient)),this._noTarget=!0,t.each(function(i){i.indexList.length&&(this._noTarget=!1)},this)},r.prototype._fillSpecifiedTargetAxis=function(e){var t=!1;return Y(pr,function(a){var i=this.getReferringComponents(Le(a),wa);if(i.specified){t=!0;var n=new St;Y(i.models,function(s){n.add(s.componentIndex)}),e.set(a,n)}},this),t},r.prototype._fillAutoTargetAxisByOrient=function(e,t){var a=this.ecModel,i=!0;if(i){var n=t==="vertical"?"y":"x",s=a.findComponents({mainType:n+"Axis"});l(s,n)}if(i){var s=a.findComponents({mainType:"singleAxis",filter:function(u){return u.get("orient",!0)===t}});l(s,"single")}function l(c,u){var h=c[0];if(h){var d=new St;if(d.add(h.componentIndex),e.set(u,d),i=!1,u==="x"||u==="y"){var f=h.getReferringComponents("grid",Ct).models[0];f&&Y(c,function(p){h.componentIndex!==p.componentIndex&&f===p.getReferringComponents("grid",Ct).models[0]&&d.add(p.componentIndex)})}}}i&&Y(pr,function(c){if(i){var u=a.findComponents({mainType:Le(c),filter:function(d){return d.get("type",!0)==="category"}});if(u[0]){var h=new St;h.add(u[0].componentIndex),e.set(c,h),i=!1}}},this)},r.prototype._makeAutoOrientByTargetAxis=function(){var e;return this.eachTargetAxis(function(t){!e&&(e=t)},this),e==="y"?"vertical":"horizontal"},r.prototype._setDefaultThrottle=function(e){if(e.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var t=this.ecModel.option;this.option.throttle=t.animation&&t.animationDurationUpdate>0?100:20}},r.prototype._updateRangeUse=function(e){var t=this._rangePropMode,a=this.get("rangeMode");Y([["start","startValue"],["end","endValue"]],function(i,n){var s=e[i[0]]!=null,l=e[i[1]]!=null;s&&!l?t[n]="percent":!s&&l?t[n]="value":a?t[n]=a[n]:s&&(t[n]="percent")})},r.prototype.noTarget=function(){return this._noTarget},r.prototype.getFirstTargetAxisModel=function(){var e;return this.eachTargetAxis(function(t,a){e==null&&(e=this.ecModel.getComponent(Le(t),a))},this),e},r.prototype.eachTargetAxis=function(e,t){this._targetAxisInfoMap.each(function(a,i){Y(a.indexList,function(n){e.call(t,i,n)})})},r.prototype.getAxisProxy=function(e,t){var a=this.getAxisModel(e,t);if(a)return a.__dzAxisProxy},r.prototype.getAxisModel=function(e,t){var a=this._targetAxisInfoMap.get(e);if(a&&a.indexMap[t])return this.ecModel.getComponent(Le(e),t)},r.prototype.setRawRange=function(e){var t=this.option,a=this.settledOption;Y([["start","startValue"],["end","endValue"]],function(i){(e[i[0]]!=null||e[i[1]]!=null)&&(t[i[0]]=a[i[0]]=e[i[0]],t[i[1]]=a[i[1]]=e[i[1]])},this),this._updateRangeUse(e)},r.prototype.setCalculatedRange=function(e){var t=this.option;Y(["start","startValue","end","endValue"],function(a){t[a]=e[a]})},r.prototype.getPercentRange=function(){var e=this.findRepresentativeAxisProxy();if(e)return e.getDataPercentWindow()},r.prototype.getValueRange=function(e,t){if(e==null&&t==null){var a=this.findRepresentativeAxisProxy();if(a)return a.getDataValueWindow()}else return this.getAxisProxy(e,t).getDataValueWindow()},r.prototype.findRepresentativeAxisProxy=function(e){if(e)return e.__dzAxisProxy;for(var t,a=this._targetAxisInfoMap.keys(),i=0;i<a.length;i++)for(var n=a[i],s=this._targetAxisInfoMap.get(n),l=0;l<s.indexList.length;l++){var c=this.getAxisProxy(n,s.indexList[l]);if(c.hostedBy(this))return c;t||(t=c)}return t},r.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},r.prototype.getOrient=function(){return this._orient},r.type="dataZoom",r.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],r.defaultOption={z:4,filterMode:"filter",start:0,end:100},r}(Aa);function gr(o){var r={};return Y(["start","end","startValue","endValue","throttle"],function(e){o.hasOwnProperty(e)&&(r[e]=o[e])}),r}var Gr=function(o){ne(r,o);function r(){var e=o!==null&&o.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.render=function(e,t,a,i){this.dataZoomModel=e,this.ecModel=t,this.api=a},r.type="dataZoom",r}(Da),ze=Y,vr=He,Vn=function(){function o(r,e,t,a){this._dimName=r,this._axisIndex=e,this.ecModel=a,this._dataZoomModel=t}return o.prototype.hostedBy=function(r){return this._dataZoomModel===r},o.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},o.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},o.prototype.getTargetSeriesModels=function(){var r=[];return this.ecModel.eachSeries(function(e){if(zn(e)){var t=Le(this._dimName),a=e.getReferringComponents(t,Ct).models[0];a&&this._axisIndex===a.componentIndex&&r.push(e)}},this),r},o.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},o.prototype.getMinMaxSpan=function(){return Ir(this._minMaxSpan)},o.prototype.calculateDataWindow=function(r){var e=this._dataExtent,t=this.getAxisModel(),a=t.axis.scale,i=this._dataZoomModel.getRangePropMode(),n=[0,100],s=[],l=[],c;ze(["start","end"],function(d,f){var p=r[d],v=r[d+"Value"];i[f]==="percent"?(p==null&&(p=n[f]),v=a.parse(j(p,n,e))):(c=!0,v=v==null?e[f]:a.parse(v),p=j(v,e,n)),l[f]=v==null||isNaN(v)?e[f]:v,s[f]=p==null||isNaN(p)?n[f]:p}),vr(l),vr(s);var u=this._minMaxSpan;c?h(l,s,e,n,!1):h(s,l,n,e,!0);function h(d,f,p,v,g){var b=g?"Span":"ValueSpan";je(0,d,p,"all",u["min"+b],u["max"+b]);for(var _=0;_<2;_++)f[_]=j(d[_],p,v,!0),g&&(f[_]=a.parse(f[_]))}return{valueWindow:l,percentWindow:s}},o.prototype.reset=function(r){if(r===this._dataZoomModel){var e=this.getTargetSeriesModels();this._dataExtent=Nn(this,this._dimName,e),this._updateMinMaxSpan();var t=this.calculateDataWindow(r.settledOption);this._valueWindow=t.valueWindow,this._percentWindow=t.percentWindow,this._setAxisModel()}},o.prototype.filterData=function(r,e){if(r!==this._dataZoomModel)return;var t=this._dimName,a=this.getTargetSeriesModels(),i=r.get("filterMode"),n=this._valueWindow;if(i==="none")return;ze(a,function(l){var c=l.getData(),u=c.mapDimensionsAll(t);if(u.length){if(i==="weakFilter"){var h=c.getStore(),d=Et(u,function(f){return c.getDimensionIndex(f)},c);c.filterSelf(function(f){for(var p,v,g,b=0;b<u.length;b++){var _=h.get(d[b],f),x=!isNaN(_),O=_<n[0],w=_>n[1];if(x&&!O&&!w)return!0;x&&(g=!0),O&&(p=!0),w&&(v=!0)}return g&&p&&v})}else ze(u,function(f){if(i==="empty")l.setData(c=c.map(f,function(v){return s(v)?v:NaN}));else{var p={};p[f]=n,c.selectRange(p)}});ze(u,function(f){c.setApproximateExtent(n,f)})}});function s(l){return l>=n[0]&&l<=n[1]}},o.prototype._updateMinMaxSpan=function(){var r=this._minMaxSpan={},e=this._dataZoomModel,t=this._dataExtent;ze(["min","max"],function(a){var i=e.get(a+"Span"),n=e.get(a+"ValueSpan");n!=null&&(n=this.getAxisModel().axis.scale.parse(n)),n!=null?i=j(t[0]+n,t,[0,100],!0):i!=null&&(n=j(i,[0,100],t,!0)-t[0]),r[a+"Span"]=i,r[a+"ValueSpan"]=n},this)},o.prototype._setAxisModel=function(){var r=this.getAxisModel(),e=this._percentWindow,t=this._valueWindow;if(e){var a=La(t,[0,500]);a=Math.min(a,20);var i=r.axis.scale.rawExtentInfo;e[0]!==0&&i.setDeterminedMinMax("min",+t[0].toFixed(a)),e[1]!==100&&i.setDeterminedMinMax("max",+t[1].toFixed(a)),i.freeze()}},o}();function Nn(o,r,e){var t=[1/0,-1/0];ze(e,function(n){Ca(t,n.getData(),r)});var a=o.getAxisModel(),i=Oa(a.axis.scale,a,t).calculate();return[i.min,i.max]}var Bn={getTargetSeries:function(o){function r(a){o.eachComponent("dataZoom",function(i){i.eachTargetAxis(function(n,s){var l=o.getComponent(Le(n),s);a(n,s,l,i)})})}r(function(a,i,n,s){n.__dzAxisProxy=null});var e=[];r(function(a,i,n,s){n.__dzAxisProxy||(n.__dzAxisProxy=new Vn(a,i,s,o),e.push(n.__dzAxisProxy))});var t=Te();return Y(e,function(a){Y(a.getTargetSeriesModels(),function(i){t.set(i.uid,i)})}),t},overallReset:function(o,r){o.eachComponent("dataZoom",function(e){e.eachTargetAxis(function(t,a){e.getAxisProxy(t,a).reset(e)}),e.eachTargetAxis(function(t,a){e.getAxisProxy(t,a).filterData(e,r)})}),o.eachComponent("dataZoom",function(e){var t=e.findRepresentativeAxisProxy();if(t){var a=t.getDataPercentWindow(),i=t.getDataValueWindow();e.setCalculatedRange({start:a[0],end:a[1],startValue:i[0],endValue:i[1]})}})}};function Yn(o){o.registerAction("dataZoom",function(r,e){var t=$n(e,r);Y(t,function(a){a.setRawRange({start:r.start,end:r.end,startValue:r.startValue,endValue:r.endValue})})})}var mr=!1;function Fr(o){mr||(mr=!0,o.registerProcessor(o.PRIORITY.PROCESSOR.FILTER,Bn),Yn(o),o.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}var Zn=function(o){ne(r,o);function r(){var e=o!==null&&o.apply(this,arguments)||this;return e.type=r.type,e}return r.type="dataZoom.inside",r.defaultOption=Tt(ut.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),r}(ut),$t=qe();function Wn(o,r,e){$t(o).coordSysRecordMap.each(function(t){var a=t.dataZoomInfoMap.get(r.uid);a&&(a.getRange=e)})}function Hn(o,r){for(var e=$t(o).coordSysRecordMap,t=e.keys(),a=0;a<t.length;a++){var i=t[a],n=e.get(i),s=n.dataZoomInfoMap;if(s){var l=r.uid,c=s.get(l);c&&(s.removeKey(l),s.keys().length||Xr(e,n))}}}function Xr(o,r){if(r){o.removeKey(r.model.uid);var e=r.controller;e&&e.dispose()}}function Gn(o,r){var e={model:r,containsPoint:Xe(Xn,r),dispatchAction:Xe(Fn,o),dataZoomInfoMap:null,controller:null},t=e.controller=new In(o.getZr());return Y(["pan","zoom","scrollMove"],function(a){t.on(a,function(i){var n=[];e.dataZoomInfoMap.each(function(s){if(i.isAvailableBehavior(s.model.option)){var l=(s.getRange||{})[a],c=l&&l(s.dzReferCoordSysInfo,e.model.mainType,e.controller,i);!s.model.get("disabled",!0)&&c&&n.push({dataZoomId:s.model.id,start:c[0],end:c[1]})}}),n.length&&e.dispatchAction(n)})}),e}function Fn(o,r){o.isDisposed()||o.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:r})}function Xn(o,r,e,t){return o.coordinateSystem.containPoint([e,t])}function jn(o,r,e){var t,a="type_",i={type_true:2,type_move:1,type_false:0,type_undefined:-1},n=!0;return o.each(function(s){var l=s.model,c=l.get("disabled",!0)?!1:l.get("zoomLock",!0)?"move":!0;i[a+c]>i[a+t]&&(t=c),n=n&&l.get("preventDefaultMouseMove",!0)}),{controlType:t,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!n,api:e,zInfo:{component:r.model},triggerInfo:{roamTrigger:null,isInSelf:r.containsPoint}}}}function Un(o){o.registerProcessor(o.PRIORITY.PROCESSOR.FILTER,function(r,e){var t=$t(e),a=t.coordSysRecordMap||(t.coordSysRecordMap=Te());a.each(function(i){i.dataZoomInfoMap=null}),r.eachComponent({mainType:"dataZoom",subType:"inside"},function(i){var n=Hr(i);Y(n.infoList,function(s){var l=s.model.uid,c=a.get(l)||a.set(l,Gn(e,s.model)),u=c.dataZoomInfoMap||(c.dataZoomInfoMap=Te());u.set(i.uid,{dzReferCoordSysInfo:s,model:i,getRange:null})})}),a.each(function(i){var n=i.controller,s,l=i.dataZoomInfoMap;if(l){var c=l.keys()[0];c!=null&&(s=l.get(c))}if(!s){Xr(a,i);return}var u=jn(l,i,e);n.enable(u.controlType,u.opt),Er(i,"dispatchAction",s.model.get("throttle",!0),"fixRate")})})}var qn=function(o){ne(r,o);function r(){var e=o!==null&&o.apply(this,arguments)||this;return e.type="dataZoom.inside",e}return r.prototype.render=function(e,t,a){if(o.prototype.render.apply(this,arguments),e.noTarget()){this._clear();return}this.range=e.getPercentRange(),Wn(a,e,{pan:W(xt.pan,this),zoom:W(xt.zoom,this),scrollMove:W(xt.scrollMove,this)})},r.prototype.dispose=function(){this._clear(),o.prototype.dispose.apply(this,arguments)},r.prototype._clear=function(){Hn(this.api,this.dataZoomModel),this.range=null},r.type="dataZoom.inside",r}(Gr),xt={zoom:function(o,r,e,t){var a=this.range,i=a.slice(),n=o.axisModels[0];if(n){var s=Mt[r](null,[t.originX,t.originY],n,e,o),l=(s.signal>0?s.pixelStart+s.pixelLength-s.pixel:s.pixel-s.pixelStart)/s.pixelLength*(i[1]-i[0])+i[0],c=Math.max(1/t.scale,0);i[0]=(i[0]-l)*c+l,i[1]=(i[1]-l)*c+l;var u=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();if(je(0,i,[0,100],0,u.minSpan,u.maxSpan),this.range=i,a[0]!==i[0]||a[1]!==i[1])return i}},pan:yr(function(o,r,e,t,a,i){var n=Mt[t]([i.oldX,i.oldY],[i.newX,i.newY],r,a,e);return n.signal*(o[1]-o[0])*n.pixel/n.pixelLength}),scrollMove:yr(function(o,r,e,t,a,i){var n=Mt[t]([0,0],[i.scrollDelta,i.scrollDelta],r,a,e);return n.signal*(o[1]-o[0])*i.scrollDelta})};function yr(o){return function(r,e,t,a){var i=this.range,n=i.slice(),s=r.axisModels[0];if(s){var l=o(n,s,r,e,t,a);if(je(l,n,[0,100],"all"),this.range=n,i[0]!==n[0]||i[1]!==n[1])return n}}}var Mt={grid:function(o,r,e,t,a){var i=e.axis,n={},s=a.model.coordinateSystem.getRect();return o=o||[0,0],i.dim==="x"?(n.pixel=r[0]-o[0],n.pixelLength=s.width,n.pixelStart=s.x,n.signal=i.inverse?1:-1):(n.pixel=r[1]-o[1],n.pixelLength=s.height,n.pixelStart=s.y,n.signal=i.inverse?-1:1),n},polar:function(o,r,e,t,a){var i=e.axis,n={},s=a.model.coordinateSystem,l=s.getRadiusAxis().getExtent(),c=s.getAngleAxis().getExtent();return o=o?s.pointToCoord(o):[0,0],r=s.pointToCoord(r),e.mainType==="radiusAxis"?(n.pixel=r[0]-o[0],n.pixelLength=l[1]-l[0],n.pixelStart=l[0],n.signal=i.inverse?1:-1):(n.pixel=r[1]-o[1],n.pixelLength=c[1]-c[0],n.pixelStart=c[0],n.signal=i.inverse?-1:1),n},singleAxis:function(o,r,e,t,a){var i=e.axis,n=a.model.coordinateSystem.getRect(),s={};return o=o||[0,0],i.orient==="horizontal"?(s.pixel=r[0]-o[0],s.pixelLength=n.width,s.pixelStart=n.x,s.signal=i.inverse?1:-1):(s.pixel=r[1]-o[1],s.pixelLength=n.height,s.pixelStart=n.y,s.signal=i.inverse?-1:1),s}};function Jn(o){Fr(o),o.registerComponentModel(Zn),o.registerComponentView(qn),Un(o)}var Kn=function(o){ne(r,o);function r(){var e=o!==null&&o.apply(this,arguments)||this;return e.type=r.type,e}return r.type="dataZoom.slider",r.layoutMode="box",r.defaultOption=Tt(ut.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:ee.color.accent10,borderRadius:0,backgroundColor:ee.color.transparent,dataBackground:{lineStyle:{color:ee.color.accent30,width:.5},areaStyle:{color:ee.color.accent20,opacity:.2}},selectedDataBackground:{lineStyle:{color:ee.color.accent40,width:.5},areaStyle:{color:ee.color.accent20,opacity:.3}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:ee.color.neutral00,borderColor:ee.color.accent20},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:ee.color.accent40,opacity:.5},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:ee.color.tertiary},brushSelect:!0,brushStyle:{color:ee.color.accent30,opacity:.3},emphasis:{handleLabel:{show:!0},handleStyle:{borderColor:ee.color.accent40},moveHandleStyle:{opacity:.8}},defaultLocationEdgeGap:15}),r}(ut),Ze=$e,Qn=1,wt=30,ei=7,We="horizontal",br="vertical",ti=5,ri=["line","bar","candlestick","scatter"],ai={easing:"cubicOut",duration:100,delay:0},ni=function(o){ne(r,o);function r(){var e=o!==null&&o.apply(this,arguments)||this;return e.type=r.type,e._displayables={},e}return r.prototype.init=function(e,t){this.api=t,this._onBrush=W(this._onBrush,this),this._onBrushEnd=W(this._onBrushEnd,this)},r.prototype.render=function(e,t,a,i){if(o.prototype.render.apply(this,arguments),Er(this,"_dispatchZoomAction",e.get("throttle"),"fixRate"),this._orient=e.getOrient(),e.get("show")===!1){this.group.removeAll();return}if(e.noTarget()){this._clear(),this.group.removeAll();return}(!i||i.type!=="dataZoom"||i.from!==this.uid)&&this._buildView(),this._updateView()},r.prototype.dispose=function(){this._clear(),o.prototype.dispose.apply(this,arguments)},r.prototype._clear=function(){ka(this,"_dispatchZoomAction");var e=this.api.getZr();e.off("mousemove",this._onBrush),e.off("mouseup",this._onBrushEnd)},r.prototype._buildView=function(){var e=this.group;e.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var t=this._displayables.sliderGroup=new Dt;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),e.add(t),this._positionGroup()},r.prototype._resetLocation=function(){var e=this.dataZoomModel,t=this.api,a=e.get("brushSelect"),i=a?ei:0,n=Ia(e,t).refContainer,s=this._findCoordRect(),l=e.get("defaultLocationEdgeGap",!0)||0,c=this._orient===We?{right:n.width-s.x-s.width,top:n.height-wt-l-i,width:s.width,height:wt}:{right:l,top:s.y,width:wt,height:s.height},u=Ta(e.option);Y(["right","top","width","height"],function(d){u[d]==="ph"&&(u[d]=c[d])});var h=Ra(u,n);this._location={x:h.x,y:h.y},this._size=[h.width,h.height],this._orient===br&&this._size.reverse()},r.prototype._positionGroup=function(){var e=this.group,t=this._location,a=this._orient,i=this.dataZoomModel.getFirstTargetAxisModel(),n=i&&i.get("inverse"),s=this._displayables.sliderGroup,l=(this._dataShadowInfo||{}).otherAxisInverse;s.attr(a===We&&!n?{scaleY:l?1:-1,scaleX:1}:a===We&&n?{scaleY:l?1:-1,scaleX:-1}:a===br&&!n?{scaleY:l?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:l?-1:1,scaleX:-1,rotation:Math.PI/2});var c=e.getBoundingRect([s]);e.x=t.x-c.x,e.y=t.y-c.y,e.markRedraw()},r.prototype._getViewExtent=function(){return[0,this._size[0]]},r.prototype._renderBackground=function(){var e=this.dataZoomModel,t=this._size,a=this._displayables.sliderGroup,i=e.get("brushSelect");a.add(new Ze({silent:!0,shape:{x:0,y:0,width:t[0],height:t[1]},style:{fill:e.get("backgroundColor")},z2:-40}));var n=new Ze({shape:{x:0,y:0,width:t[0],height:t[1]},style:{fill:"transparent"},z2:0,onclick:W(this._onClickPanel,this)}),s=this.api.getZr();i?(n.on("mousedown",this._onBrushStart,this),n.cursor="crosshair",s.on("mousemove",this._onBrush),s.on("mouseup",this._onBrushEnd)):(s.off("mousemove",this._onBrush),s.off("mouseup",this._onBrushEnd)),a.add(n)},r.prototype._renderDataShadow=function(){var e=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],!e)return;var t=this._size,a=this._shadowSize||[],i=e.series,n=i.getRawData(),s=i.getShadowDim&&i.getShadowDim(),l=s&&n.getDimensionInfo(s)?i.getShadowDim():e.otherDim;if(l==null)return;var c=this._shadowPolygonPts,u=this._shadowPolylinePts;if(n!==this._shadowData||l!==this._shadowDim||t[0]!==a[0]||t[1]!==a[1]){var h=n.getDataExtent(e.thisDim),d=n.getDataExtent(l),f=(d[1]-d[0])*.3;d=[d[0]-f,d[1]+f];var p=[0,t[1]],v=[0,t[0]],g=[[t[0],0],[0,0]],b=[],_=v[1]/Math.max(1,n.count()-1),x=t[0]/(h[1]-h[0]),O=e.thisAxis.type==="time",w=-_,T=Math.round(n.count()/t[0]),P;n.each([e.thisDim,l],function(V,R,A){if(T>0&&A%T){O||(w+=_);return}w=O?(+V-h[0])*x:w+_;var m=R==null||isNaN(R)||R==="",S=m?0:j(R,d,p,!0);m&&!P&&A?(g.push([g[g.length-1][0],0]),b.push([b[b.length-1][0],0])):!m&&P&&(g.push([w,0]),b.push([w,0])),m||(g.push([w,S]),b.push([w,S])),P=m}),c=this._shadowPolygonPts=g,u=this._shadowPolylinePts=b}this._shadowData=n,this._shadowDim=l,this._shadowSize=[t[0],t[1]];var k=this.dataZoomModel;function $(V){var R=k.getModel(V?"selectedDataBackground":"dataBackground"),A=new Dt,m=new Ba({shape:{points:c},segmentIgnoreThreshold:1,style:R.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),S=new kt({shape:{points:u},segmentIgnoreThreshold:1,style:R.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19});return A.add(m),A.add(S),A}for(var E=0;E<3;E++){var M=$(E===1);this._displayables.sliderGroup.add(M),this._displayables.dataShadowSegs.push(M)}},r.prototype._prepareDataShadowInfo=function(){var e=this.dataZoomModel,t=e.get("showDataShadow");if(t!==!1){var a,i=this.ecModel;return e.eachTargetAxis(function(n,s){var l=e.getAxisProxy(n,s).getTargetSeriesModels();Y(l,function(c){if(!a&&!(t!==!0&&Pr(ri,c.get("type"))<0)){var u=i.getComponent(Le(n),s).axis,h=ii(n),d,f=c.coordinateSystem;h!=null&&f.getOtherAxis&&(d=f.getOtherAxis(u).inverse),h=c.getData().mapDimension(h);var p=c.getData().mapDimension(n);a={thisAxis:u,series:c,thisDim:p,otherDim:h,otherAxisInverse:d}}},this)},this),a}},r.prototype._renderHandle=function(){var e=this.group,t=this._displayables,a=t.handles=[null,null],i=t.handleLabels=[null,null],n=this._displayables.sliderGroup,s=this._size,l=this.dataZoomModel,c=this.api,u=l.get("borderRadius")||0,h=l.get("brushSelect"),d=t.filler=new Ze({silent:h,style:{fill:l.get("fillerColor")},textConfig:{position:"inside"}});n.add(d),n.add(new Ze({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:s[0],height:s[1],r:u},style:{stroke:l.get("dataBackgroundColor")||l.get("borderColor"),lineWidth:Qn,fill:ee.color.transparent}})),Y([0,1],function(x){var O=l.get("handleIcon");!Pa[O]&&O.indexOf("path://")<0&&O.indexOf("image://")<0&&(O="path://"+O);var w=Xt(O,-1,0,2,2,null,!0);w.attr({cursor:oi(this._orient),draggable:!0,drift:W(this._onDragMove,this,x),ondragend:W(this._onDragEnd,this),onmouseover:W(this._showDataInfo,this,!0),onmouseout:W(this._showDataInfo,this,!1),z2:5});var T=w.getBoundingRect(),P=l.get("handleSize");this._handleHeight=Fe(P,this._size[1]),this._handleWidth=T.width/T.height*this._handleHeight,w.setStyle(l.getModel("handleStyle").getItemStyle()),w.style.strokeNoScale=!0,w.rectHover=!0,w.ensureState("emphasis").style=l.getModel(["emphasis","handleStyle"]).getItemStyle(),Ea(w);var k=l.get("handleColor");k!=null&&(w.style.fill=k),n.add(a[x]=w);var $=l.getModel("textStyle"),E=l.get("handleLabel")||{},M=E.show||!1;e.add(i[x]=new Tr({silent:!0,invisible:!M,style:za($,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:$.getTextColor(),font:$.getFont()}),z2:10}))},this);var f=d;if(h){var p=Fe(l.get("moveHandleSize"),s[1]),v=t.moveHandle=new $e({style:l.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:s[1]-.5,height:p}}),g=p*.8,b=t.moveHandleIcon=Xt(l.get("moveHandleIcon"),-g/2,-g/2,g,g,ee.color.neutral00,!0);b.silent=!0,b.y=s[1]+p/2-.5,v.ensureState("emphasis").style=l.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var _=Math.min(s[1]/2,Math.max(p,10));f=t.moveZone=new $e({invisible:!0,shape:{y:s[1]-_,height:p+_}}),f.on("mouseover",function(){c.enterEmphasis(v)}).on("mouseout",function(){c.leaveEmphasis(v)}),n.add(v),n.add(b),n.add(f)}f.attr({draggable:!0,cursor:"default",drift:W(this._onDragMove,this,"all"),ondragstart:W(this._showDataInfo,this,!0),ondragend:W(this._onDragEnd,this),onmouseover:W(this._showDataInfo,this,!0),onmouseout:W(this._showDataInfo,this,!1)})},r.prototype._resetInterval=function(){var e=this._range=this.dataZoomModel.getPercentRange(),t=this._getViewExtent();this._handleEnds=[j(e[0],[0,100],t,!0),j(e[1],[0,100],t,!0)]},r.prototype._updateInterval=function(e,t){var a=this.dataZoomModel,i=this._handleEnds,n=this._getViewExtent(),s=a.findRepresentativeAxisProxy().getMinMaxSpan(),l=[0,100];je(t,i,n,a.get("zoomLock")?"all":e,s.minSpan!=null?j(s.minSpan,l,n,!0):null,s.maxSpan!=null?j(s.maxSpan,l,n,!0):null);var c=this._range,u=this._range=He([j(i[0],n,l,!0),j(i[1],n,l,!0)]);return!c||c[0]!==u[0]||c[1]!==u[1]},r.prototype._updateView=function(e){var t=this._displayables,a=this._handleEnds,i=He(a.slice()),n=this._size;Y([0,1],function(f){var p=t.handles[f],v=this._handleHeight;p.attr({scaleX:v/2,scaleY:v/2,x:a[f]+(f?-1:1),y:n[1]/2-v/2})},this),t.filler.setShape({x:i[0],y:0,width:i[1]-i[0],height:n[1]});var s={x:i[0],width:i[1]-i[0]};t.moveHandle&&(t.moveHandle.setShape(s),t.moveZone.setShape(s),t.moveZone.getBoundingRect(),t.moveHandleIcon&&t.moveHandleIcon.attr("x",s.x+s.width/2));for(var l=t.dataShadowSegs,c=[0,i[0],i[1],n[0]],u=0;u<l.length;u++){var h=l[u],d=h.getClipPath();d||(d=new $e,h.setClipPath(d)),d.setShape({x:c[u],y:0,width:c[u+1]-c[u],height:n[1]})}this._updateDataInfo(e)},r.prototype._updateDataInfo=function(e){var t=this.dataZoomModel,a=this._displayables,i=a.handleLabels,n=this._orient,s=["",""];if(t.get("showDetail")){var l=t.findRepresentativeAxisProxy();if(l){var c=l.getAxisModel().axis,u=this._range,h=e?l.calculateDataWindow({start:u[0],end:u[1]}).valueWindow:l.getDataValueWindow();s=[this._formatLabel(h[0],c),this._formatLabel(h[1],c)]}}var d=He(this._handleEnds.slice());f.call(this,0),f.call(this,1);function f(p){var v=$a(a.handles[p].parent,this.group),g=Va(p===0?"right":"left",v),b=this._handleWidth/2+ti,_=jt([d[p]+(p===0?-b:b),this._size[1]/2],v);i[p].setStyle({x:_[0],y:_[1],verticalAlign:n===We?"middle":g,align:n===We?g:"center",text:s[p]})}},r.prototype._formatLabel=function(e,t){var a=this.dataZoomModel,i=a.get("labelFormatter"),n=a.get("labelPrecision");(n==null||n==="auto")&&(n=t.getPixelPrecision());var s=e==null||isNaN(e)?"":t.type==="category"||t.type==="time"?t.scale.getLabel({value:Math.round(e)}):e.toFixed(Math.min(n,20));return Na(i)?i(e,s):Rr(i)?i.replace("{value}",s):s},r.prototype._showDataInfo=function(e){var t=this.dataZoomModel.get("handleLabel")||{},a=t.show||!1,i=this.dataZoomModel.getModel(["emphasis","handleLabel"]),n=i.get("show")||!1,s=e||this._dragging?n:a,l=this._displayables,c=l.handleLabels;c[0].attr("invisible",!s),c[1].attr("invisible",!s),l.moveHandle&&this.api[s?"enterEmphasis":"leaveEmphasis"](l.moveHandle,1)},r.prototype._onDragMove=function(e,t,a,i){this._dragging=!0,st(i.event);var n=this._displayables.sliderGroup.getLocalTransform(),s=jt([t,a],n,!0),l=this._updateInterval(e,s[0]),c=this.dataZoomModel.get("realtime");this._updateView(!c),l&&c&&this._dispatchZoomAction(!0)},r.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1);var e=this.dataZoomModel.get("realtime");!e&&this._dispatchZoomAction(!1)},r.prototype._onClickPanel=function(e){var t=this._size,a=this._displayables.sliderGroup.transformCoordToLocal(e.offsetX,e.offsetY);if(!(a[0]<0||a[0]>t[0]||a[1]<0||a[1]>t[1])){var i=this._handleEnds,n=(i[0]+i[1])/2,s=this._updateInterval("all",a[0]-n);this._updateView(),s&&this._dispatchZoomAction(!1)}},r.prototype._onBrushStart=function(e){var t=e.offsetX,a=e.offsetY;this._brushStart=new X(t,a),this._brushing=!0,this._brushStartTime=+new Date},r.prototype._onBrushEnd=function(e){if(this._brushing){var t=this._displayables.brushRect;if(this._brushing=!1,!!t){t.attr("ignore",!0);var a=t.shape,i=+new Date;if(!(i-this._brushStartTime<200&&Math.abs(a.width)<5)){var n=this._getViewExtent(),s=[0,100],l=this._handleEnds=[a.x,a.x+a.width],c=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();je(0,l,n,0,c.minSpan!=null?j(c.minSpan,s,n,!0):null,c.maxSpan!=null?j(c.maxSpan,s,n,!0):null),this._range=He([j(l[0],n,s,!0),j(l[1],n,s,!0)]),this._updateView(),this._dispatchZoomAction(!1)}}}},r.prototype._onBrush=function(e){this._brushing&&(st(e.event),this._updateBrushRect(e.offsetX,e.offsetY))},r.prototype._updateBrushRect=function(e,t){var a=this._displayables,i=this.dataZoomModel,n=a.brushRect;n||(n=a.brushRect=new Ze({silent:!0,style:i.getModel("brushStyle").getItemStyle()}),a.sliderGroup.add(n)),n.attr("ignore",!1);var s=this._brushStart,l=this._displayables.sliderGroup,c=l.transformCoordToLocal(e,t),u=l.transformCoordToLocal(s.x,s.y),h=this._size;c[0]=Math.max(Math.min(h[0],c[0]),0),n.setShape({x:u[0],y:0,width:c[0]-u[0],height:h[1]})},r.prototype._dispatchZoomAction=function(e){var t=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:e?ai:null,start:t[0],end:t[1]})},r.prototype._findCoordRect=function(){var e,t=Hr(this.dataZoomModel).infoList;if(!e&&t.length){var a=t[0].model.coordinateSystem;e=a.getRect&&a.getRect()}if(!e){var i=this.api.getWidth(),n=this.api.getHeight();e={x:i*.2,y:n*.2,width:i*.6,height:n*.6}}return e},r.type="dataZoom.slider",r}(Gr);function ii(o){var r={x:"y",y:"x",radius:"angle",angle:"radius"};return r[o]}function oi(o){return o==="vertical"?"ns-resize":"ew-resize"}function si(o){o.registerComponentModel(Kn),o.registerComponentView(ni),Fr(o)}function Vt(o){re(Jn),re(si)}const li={__name:"BookingSourceChart",props:{bookings:{type:Array,required:!0}},setup(o){re([Je,ce,he,de]);const r=o,e={tg:"#229ED9",i:"#E4405F",v:"#7360F2",w:"#25D366",t:"#666",b:"#111",unknown:"#ccc"},t={tg:"Телеграм",i:"Інстаграм",v:"Viber",w:"WhatsApp",t:"Телефон",b:"Бот"},a=K(()=>{const i={};r.bookings.forEach(s=>{const l=JSON.parse(s.meta).s||"unknown";i[l]=(i[l]||0)+1});const n=Object.entries(i).map(([s,l])=>({name:t[s]||s,value:l,itemStyle:{color:e[s]||e.unknown}}));return{tooltip:{trigger:"item",formatter:"{b}: <strong>{c}</strong> бронювань ({d}%)"},legend:{bottom:0,textStyle:{fontSize:12}},series:[{type:"pie",radius:["45%","75%"],avoidLabelOverlap:!0,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:3},label:{show:!0,formatter:`{b}
{d}%`,fontSize:13},emphasis:{label:{show:!0,fontSize:16,fontWeight:"bold"},itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}},data:n}]}});return(i,n)=>(ae(),le(J,{title:"Джерело бронювань",icon:"pie-chart"},{default:q(()=>[B(ue(fe),{option:a.value,autoresize:"",style:{height:"320px"}},null,8,["option"])]),_:1}))}},ui={class:"info-grid"},ci={__name:"StatsSummary",props:{bookings:{type:Object},guests:{type:Object}},setup(o){const r=o,e=K(()=>{let t=0;return r.bookings.forEach(a=>{t+=Number(JSON.parse(a.meta).g)}),t});return console.log(r.bookings),(t,a)=>(ae(),jr("div",ui,[B(J,{title:"Загальна кількість бронювань",icon:"calendar-white"},{default:q(()=>[me("b",null,pt(r.bookings.length),1)]),_:1}),B(J,{title:"Загальна кількість гостей",icon:"guests-white"},{default:q(()=>[me("b",null,pt(r.guests.length),1)]),_:1}),B(J,{title:"Загальна кількість відвідувачів",icon:"visitors"},{default:q(()=>[me("b",null,pt(e.value),1)]),_:1})]))}},hi=Pe(ci,[["__scopeId","data-v-13f2263f"]]),di={__name:"BookingsByMonthChart",props:{bookings:{type:Array,required:!0}},setup(o){re([Re,Ce,ce,he,Vt,de]);const r=o,e={"01":"Січень","02":"Лютий","03":"Березень","04":"Квітень","05":"Травень","06":"Червень","07":"Липень","08":"Серпень","09":"Вересень",10:"Жовтень",11:"Листопад",12:"Грудень"},t=["#2f8051","#42d778","#dc2626","#ea580c","#0891b2"],a=["01","02","03","04","05","06","07","08","09","10","11","12"],i=K(()=>{const n={};r.bookings.forEach(l=>{const[c,u,h]=l.date.split("T")[0].split("."),d=h.length===2?`20${h}`:h;n[d]||(n[d]={}),n[d][u]||(n[d][u]=0),n[d][u]++});const s=Object.keys(n).sort();return{color:t,tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:s,bottom:0,textStyle:{fontSize:12}},grid:{left:"3%",right:"4%",bottom:"12%",top:"5%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:a.map(l=>e[l]),axisLine:{lineStyle:{color:"#ccc"}}},yAxis:{type:"value",minInterval:1,axisLine:{lineStyle:{color:"#ccc"}},splitLine:{lineStyle:{type:"dashed",color:"#e5e7eb"}}},series:s.map((l,c)=>({name:l,type:"line",smooth:!0,symbol:"circle",symbolSize:6,lineStyle:{width:3},emphasis:{focus:"series",itemStyle:{borderWidth:2,borderColor:"#fff"}},areaStyle:{opacity:.1},data:a.map(u=>n[l][u]||0)}))}});return(n,s)=>(ae(),le(J,{title:"Бронювання за місяцями",icon:"calendar-white"},{default:q(()=>[B(ue(fe),{option:i.value,autoresize:"",style:{height:"350px"}},null,8,["option"])]),_:1}))}},fi=Pe(di,[["__scopeId","data-v-44a7b74c"]]),pi={__name:"HousesChart",props:{bookings:{type:Array,required:!0}},setup(o){re([gn,Ce,ce,he,de]);const r=o,e={family:"Family House",right:"River View Right",left:"River View Left"},t=["#2f8051","#42d778","#dc2626","#ea580c","#0891b2"],a=K(()=>{const i=new Set,n=new Set;r.bookings.forEach(u=>{const[h,d,f]=u.date.split("T")[0].split("."),p=f.length===2?`20${f}`:f;i.add(p),n.add(u.house)});const s=Array.from(i).sort(),l=Array.from(n),c={};return s.forEach(u=>{c[u]={},l.forEach(h=>c[u][h]=0)}),r.bookings.forEach(u=>{const[h,d,f]=u.date.split("T")[0].split("."),p=f.length===2?`20${f}`:f;c[p][u.house]++}),{color:t,tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:u=>{let h=`<strong>${u[0].axisValue}</strong><br/>`;return u.forEach(d=>{h+=`${d.marker} ${d.seriesName}: <strong>${d.value}</strong> бронювань<br/>`}),h}},legend:{data:s,bottom:0,textStyle:{fontSize:12}},grid:{left:"3%",right:"4%",bottom:"12%",top:"5%",containLabel:!0},xAxis:{type:"category",data:l.map(u=>e[u]||u),axisLine:{lineStyle:{color:"#ccc"}},axisLabel:{interval:0,rotate:0}},yAxis:{type:"value",minInterval:1,axisLine:{lineStyle:{color:"#ccc"}},splitLine:{lineStyle:{type:"dashed",color:"#e5e7eb"}}},series:s.map((u,h)=>({name:u,type:"bar",barMaxWidth:50,data:l.map(d=>c[u][d]),emphasis:{focus:"series",itemStyle:{shadowBlur:10,shadowColor:"rgba(0, 0, 0, 0.3)"}},itemStyle:{borderRadius:[4,4,0,0]}}))}});return(i,n)=>(ae(),le(J,{title:"Бронювання по будинках",icon:"pie-chart"},{default:q(()=>[B(ue(fe),{option:a.value,autoresize:"",style:{height:"350px"}},null,8,["option"])]),_:1}))}},gi=Pe(pi,[["__scopeId","data-v-35e9b36c"]]),vi={__name:"WeekdayChart",props:{bookings:{type:Array,required:!0}},setup(o){re([Re,Ce,ce,he,de]);const r=o,e=["#2f8051","#42d778","#dc2626","#ea580c","#0891b2"],t=["Понеділок","Вівторок","Середа","Четвер","П'ятниця","Субота","Неділя"],a=K(()=>{const i={};r.bookings.forEach(s=>{const[l,c,u]=s.date.split("T")[0].split("."),h=u.length===2?`20${u}`:u,f=(new Date(Number(h),Number(c)-1,Number(l)).getDay()+6)%7;i[h]||(i[h]=new Array(7).fill(0)),i[h][f]++});const n=Object.keys(i).sort();return{color:e,tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}},formatter:s=>{let l=`<strong>${s[0].axisValue}</strong><br/>`;return s.forEach(c=>{l+=`${c.marker} ${c.seriesName}: <strong>${c.value}</strong> бронювань<br/>`}),l}},legend:{data:n,bottom:0,textStyle:{fontSize:12}},grid:{left:"3%",right:"4%",bottom:"12%",top:"5%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:t,axisLine:{lineStyle:{color:"#ccc"}}},yAxis:{type:"value",minInterval:1,axisLine:{lineStyle:{color:"#ccc"}},splitLine:{lineStyle:{type:"dashed",color:"#e5e7eb"}}},series:n.map((s,l)=>({name:s,type:"line",smooth:!0,symbol:"circle",symbolSize:6,lineStyle:{width:3},emphasis:{focus:"series",itemStyle:{borderWidth:2,borderColor:"#fff"}},areaStyle:{opacity:.1},data:i[s]}))}});return(i,n)=>(ae(),le(J,{title:"Бронювання за днями тижня",icon:"calendar-white"},{default:q(()=>[B(ue(fe),{option:a.value,autoresize:"",style:{height:"350px"}},null,8,["option"])]),_:1}))}},mi=Pe(vi,[["__scopeId","data-v-0212f149"]]),yi={__name:"BookingTypeChart",props:{bookings:{type:Array,required:!0}},setup(o){re([Je,ce,he,de]);const r=o,e=["#2f8051","#42d778","#ea580c","#dc2626","#0891b2"],t={house:"Будинок",lazni:"Лазня",pool:"Басейн"},a=K(()=>{const i={};r.bookings.forEach(s=>{const l=s.type||"unknown";i[l]=(i[l]||0)+1});const n=Object.entries(i).map(([s,l])=>({name:t[s]||s,value:l}));return{color:e,tooltip:{trigger:"item",formatter:"{b}: <strong>{c}</strong> бронювань ({d}%)"},legend:{bottom:0,textStyle:{fontSize:12}},series:[{type:"pie",radius:["45%","75%"],avoidLabelOverlap:!0,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:3},label:{show:!0,formatter:`{b}
{d}%`,fontSize:13},emphasis:{label:{show:!0,fontSize:16,fontWeight:"bold"},itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}},data:n}]}});return(i,n)=>(ae(),le(J,{title:"Типи бронювань",icon:"pie-chart"},{default:q(()=>[B(ue(fe),{option:a.value,autoresize:"",style:{height:"320px"}},null,8,["option"])]),_:1}))}},bi={__name:"VisitorsChart",props:{bookings:{type:Array,required:!0}},setup(o){re([Re,Ce,ce,he,Vt,de]);const r=o,e={"01":"Січень","02":"Лютий","03":"Березень","04":"Квітень","05":"Травень","06":"Червень","07":"Липень","08":"Серпень","09":"Вересень",10:"Жовтень",11:"Листопад",12:"Грудень"},t=["#2f8051","#42d778","#dc2626","#ea580c","#0891b2"],a=["01","02","03","04","05","06","07","08","09","10","11","12"],i=K(()=>{const n={};r.bookings.forEach(l=>{const[c,u,h]=l.date.split("T")[0].split("."),d=h.length===2?`20${h}`:h;let f=0;try{const p=JSON.parse(l.meta||"{}");f=Number(p.g)||0}catch{f=0}n[d]||(n[d]={}),n[d][u]||(n[d][u]=0),n[d][u]+=f});const s=Object.keys(n).sort();return{color:t,tooltip:{trigger:"axis",valueFormatter:l=>`${l} гостей`},legend:{data:s,bottom:0},grid:{left:"3%",right:"4%",bottom:"12%",top:"5%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:a.map(l=>e[l])},yAxis:{type:"value",minInterval:1},series:s.map(l=>({name:l,type:"line",smooth:!0,symbol:"circle",symbolSize:6,lineStyle:{width:3},areaStyle:{opacity:.12},data:a.map(c=>n[l][c]||0)}))}});return(n,s)=>(ae(),le(J,{title:"Відвідувачів за місяцями",icon:"calendar-white"},{default:q(()=>[B(ue(fe),{option:i.value,autoresize:"",style:{height:"350px"}},null,8,["option"])]),_:1}))}},_i=Pe(bi,[["__scopeId","data-v-7c76e828"]]),Si={__name:"ChanFillChart",props:{bookings:{type:Array,required:!0}},setup(o){re([Je,ce,he,de]);const r=o,e=["#ea580c","#16a34a","#42D778"],t={c:"Цитрус",t:"Трави",h:"Хвоя"};function a(n){var h;const s={c:0,t:0,h:0};if(!((h=n==null?void 0:n.l)!=null&&h.c))return s;const l=n.l.c.split(":");if(l.length<3)return s;const c=Number(l[1])||0,u=l[2].split(",");return!c||!u.length||(c/u.length,u.forEach(d=>{d==="c"&&(s.c+=1),d==="t"&&(s.t+=1),d==="h"&&(s.h+=1)})),s}const i=K(()=>{const n={c:0,t:0,h:0};r.bookings.forEach(l=>{let c={};try{c=JSON.parse(l.meta||"{}")}catch{}const u=a(c);n.c+=u.c,n.t+=u.t,n.h+=u.h});const s=Object.entries(n).map(([l,c])=>({name:t[l],value:c}));return{color:e,tooltip:{trigger:"item",formatter:"{b}: <strong>{c}</strong> ({d}%)"},legend:{bottom:0,textStyle:{fontSize:12}},series:[{type:"pie",radius:["45%","75%"],avoidLabelOverlap:!0,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:3},label:{show:!0,formatter:`{b}
{d}%`,fontSize:13},emphasis:{label:{show:!0,fontSize:16,fontWeight:"bold"},itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}},data:s}]}});return(n,s)=>(ae(),le(J,{title:"Заповнення чану",icon:"pie-chart"},{default:q(()=>[B(ue(fe),{option:i.value,autoresize:"",style:{height:"320px"}},null,8,["option"])]),_:1}))}},xi={__name:"LazniChan",props:{bookings:{type:Array,required:!0}},setup(o){re([Je,ce,he,de]);const r=o,e=["#ea580c","#16a34a","#42D778"],t={lazni:"Лазня",chan:"Чан",both:"Лазня + Чан"},a=K(()=>{const i={lazni:0,chan:0,both:0};r.bookings.forEach(s=>{var h,d;let l={};try{l=JSON.parse(s.meta||"{}")}catch{}const c=!!((h=l.l)!=null&&h.l),u=!!((d=l.l)!=null&&d.c);c&&u?i.both++:c?i.lazni++:u&&i.chan++});const n=Object.entries(i).map(([s,l])=>({name:t[s],value:l}));return{color:e,tooltip:{trigger:"item",formatter:"{b}: <strong>{c}</strong> бронювань ({d}%)"},legend:{bottom:0,textStyle:{fontSize:12}},series:[{type:"pie",radius:["45%","75%"],avoidLabelOverlap:!0,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:3},label:{show:!0,formatter:`{b}
{d}%`,fontSize:13},emphasis:{label:{show:!0,fontSize:16,fontWeight:"bold"},itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}},data:n}]}});return(i,n)=>(ae(),le(J,{title:"Тип бронювань",icon:"pie-chart"},{default:q(()=>[B(ue(fe),{option:a.value,autoresize:"",style:{height:"320px"}},null,8,["option"])]),_:1}))}},Mi={__name:"GuestsByMonthChart",props:{guests:{type:Array,required:!0}},setup(o){re([Re,Ce,ce,he,Vt,de]);const r=o,e={"01":"Січень","02":"Лютий","03":"Березень","04":"Квітень","05":"Травень","06":"Червень","07":"Липень","08":"Серпень","09":"Вересень",10:"Жовтень",11:"Листопад",12:"Грудень"},t=["#2f8051","#42d778","#dc2626","#ea580c","#0891b2"],a=["01","02","03","04","05","06","07","08","09","10","11","12"],i=K(()=>{const n={};r.guests.forEach(u=>{const h=u.$createdAt.split("T")[0],[d,f]=h.split("-"),p=d;n[p]||(n[p]={}),n[p][f]||(n[p][f]=0),n[p][f]++});const s=Object.keys(n).sort(),l={};let c=0;return s.forEach(u=>{l[u]=a.map(h=>{const d=n[u][h]||0;return c+=d,c})}),{color:t,tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:s,bottom:0,textStyle:{fontSize:12}},grid:{left:"3%",right:"4%",bottom:"12%",top:"5%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:a.map(u=>e[u]),axisLine:{lineStyle:{color:"#ccc"}}},yAxis:{type:"value",minInterval:1,axisLine:{lineStyle:{color:"#ccc"}},splitLine:{lineStyle:{type:"dashed",color:"#e5e7eb"}}},series:s.map((u,h)=>({name:u,type:"line",smooth:!0,symbol:"circle",symbolSize:6,lineStyle:{width:3},emphasis:{focus:"series",itemStyle:{borderWidth:2,borderColor:"#fff"}},areaStyle:{opacity:.1},data:l[u]}))}});return(n,s)=>(ae(),le(J,{title:"Гості (кумулятивно) за місяцями",icon:"calendar-white"},{default:q(()=>[B(ue(fe),{option:i.value,autoresize:"",style:{height:"350px"}},null,8,["option"])]),_:1}))}},wi=Pe(Mi,[["__scopeId","data-v-8d16b9c4"]]),Ai={__name:"BotChart",setup(o){const r=xe([]);Ue(()=>{fetch("https://api.laznikyiv.com/v2/bot-log",{credentials:"include"}).then(i=>i.json().then(n=>{r.value=n.content.split(`
`).filter(s=>s.trim()!="").map(s=>s=JSON.parse(s)),console.log(r.value)}))}),re([Je,ce,he,de]);const e=["#2f8051","#42d778"],t={call:"Дзвінок",booking:"Бронювання"},a=K(()=>{const i={};r.value.forEach(s=>{const l=s.event||"unknown";i[l]=(i[l]||0)+1});const n=Object.entries(i).map(([s,l])=>({name:t[s]||s,value:l}));return{color:e,tooltip:{trigger:"item",formatter:"{b}: <strong>{c}</strong> бронювань ({d}%)"},legend:{bottom:0,textStyle:{fontSize:12}},series:[{type:"pie",radius:["45%","75%"],avoidLabelOverlap:!0,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:3},label:{show:!0,formatter:`{b}
{d}%`,fontSize:13},emphasis:{label:{show:!0,fontSize:16,fontWeight:"bold"},itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}},data:n}]}});return(i,n)=>(ae(),le(J,{title:"Типи запитів",icon:"pie-chart"},{default:q(()=>[B(ue(fe),{option:a.value,autoresize:"",style:{height:"320px"}},null,8,["option"])]),_:1}))}},Di={__name:"BotByMonth",setup(o){re([Re,ce,he,Ce,de]);const r=xe([]);Ue(async()=>{const l=await(await fetch("https://api.laznikyiv.com/v2/bot-log",{credentials:"include"})).json();r.value=l.content.split(`
`).filter(Boolean).map(JSON.parse)});const e=["call","booking"],t={call:"#2f8051",booking:"#42d778"},a={call:"Дзвінки",booking:"Бронювання"},i={"01":"Січень","02":"Лютий","03":"Березень","04":"Квітень","05":"Травень","06":"Червень","07":"Липень","08":"Серпень","09":"Вересень",10:"Жовтень",11:"Листопад",12:"Грудень"},n=K(()=>{const s=[...new Set(r.value.map(u=>u.timestamp.slice(0,7)))].sort(),l=s.map(u=>{const[h,d]=u.split("-");return`${i[d]} ${h}`}),c={call:Object.fromEntries(s.map(u=>[u,0])),booking:Object.fromEntries(s.map(u=>[u,0]))};return r.value.forEach(u=>c[u.event][u.timestamp.slice(0,7)]++),{tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{bottom:0,textStyle:{fontSize:12}},grid:{left:"3%",right:"4%",bottom:"12%",top:"5%",containLabel:!0},xAxis:{type:"category",data:l},yAxis:{type:"value",minInterval:1,axisLine:{lineStyle:{color:"#ccc"}},splitLine:{lineStyle:{type:"dashed",color:"#e5e7eb"}}},series:e.map(u=>({name:a[u],type:"line",smooth:!0,data:s.map(h=>c[u][h]),lineStyle:{width:3},symbol:"circle",symbolSize:6,emphasis:{focus:"series",itemStyle:{borderWidth:2,borderColor:"#fff"}},areaStyle:{opacity:.1},itemStyle:{color:t[u]}}))}});return(s,l)=>(ae(),le(J,{title:"Активність по місяцях",icon:"line-chart"},{default:q(()=>[B(ue(fe),{option:n.value,autoresize:"",style:{height:"320px"}},null,8,["option"])]),_:1}))}},Li={__name:"BotByWeekday",setup(o){re([Re,ce,he,Ce,de]);const r=xe([]);Ue(async()=>{const l=await(await fetch("https://api.laznikyiv.com/v2/bot-log",{credentials:"include"})).json();r.value=l.content.split(`
`).filter(Boolean).map(JSON.parse)});const e=["Пн","Вт","Ср","Чт","Пт","Сб","Нд"],t=["call","booking"],a={call:"#2f8051",booking:"#42d778"},i={call:"Дзвінки",booking:"Бронювання"},n=K(()=>{const s={call:Object.fromEntries(e.map(l=>[l,0])),booking:Object.fromEntries(e.map(l=>[l,0]))};return r.value.forEach(l=>{const c=new Date(l.timestamp),u=e[(c.getDay()+6)%7];s[l.event][u]++}),{tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{bottom:0,textStyle:{fontSize:12}},grid:{left:"3%",right:"4%",bottom:"12%",top:"5%",containLabel:!0},xAxis:{type:"category",data:e},yAxis:{type:"value",minInterval:1,axisLine:{lineStyle:{color:"#ccc"}},splitLine:{lineStyle:{type:"dashed",color:"#e5e7eb"}}},series:t.map(l=>({name:i[l],type:"line",smooth:!0,symbol:"circle",symbolSize:6,lineStyle:{width:3},emphasis:{focus:"series",itemStyle:{borderWidth:2,borderColor:"#fff"}},areaStyle:{opacity:.1},data:e.map(c=>s[l][c]),itemStyle:{color:a[l]}}))}});return(s,l)=>(ae(),le(J,{title:"Активність по днях тижня",icon:"calendar"},{default:q(()=>[B(ue(fe),{option:n.value,autoresize:"",style:{height:"320px"}},null,8,["option"])]),_:1}))}},Ci={__name:"BotByHour",setup(o){re([Re,ce,he,Ce,de]);const r=xe([]);Ue(async()=>{const l=await(await fetch("https://api.laznikyiv.com/v2/bot-log",{credentials:"include"})).json();r.value=l.content.split(`
`).filter(Boolean).map(JSON.parse)});const e=Array.from({length:24},(s,l)=>l.toString().padStart(2,"0")+":00"),t=["call","booking"],a={call:"#2f8051",booking:"#42d778"},i={call:"Дзвінки",booking:"Бронювання"},n=K(()=>{const s={call:Object.fromEntries(e.map(l=>[l,0])),booking:Object.fromEntries(e.map(l=>[l,0]))};return r.value.forEach(l=>{const c=new Date(l.timestamp).getHours().toString().padStart(2,"0")+":00";s[l.event][c]++}),{tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{bottom:0,textStyle:{fontSize:12}},grid:{left:"3%",right:"4%",bottom:"12%",top:"5%",containLabel:!0},grid:{left:"3%",right:"4%",bottom:"12%",top:"5%",containLabel:!0},xAxis:{type:"category",data:e},yAxis:{type:"value",minInterval:1,axisLine:{lineStyle:{color:"#ccc"}},splitLine:{lineStyle:{type:"dashed",color:"#e5e7eb"}}},series:t.map(l=>({name:i[l],type:"line",smooth:!0,smooth:!0,symbol:"circle",symbolSize:6,lineStyle:{width:3},emphasis:{focus:"series",itemStyle:{borderWidth:2,borderColor:"#fff"}},areaStyle:{opacity:.1},data:e.map(c=>s[l][c]),itemStyle:{color:a[l]}}))}});return(s,l)=>(ae(),le(J,{title:"Активність по годинах",icon:"clock"},{default:q(()=>[B(ue(fe),{option:n.value,autoresize:"",style:{height:"320px"}},null,8,["option"])]),_:1}))}},Oi={class:"content"},ki={class:"info-grid info-2"},Ii={class:"info-grid info-2"},Ti={class:"info-grid info-2"},Ri={__name:"AnalyticsView",setup(o){qt.extend(Fa),qt.locale("uk");const r=xe([]),e=xe([]),t=xe(!0);xe("all"),xe("all"),xe("all");const a=K(()=>r.value);return K(()=>{const i=new Set;return r.value.forEach(n=>{if(!n.d)return;const[s]=n.d.split("-"),l=s.split("T")[0].split(".")[2];i.add(l)}),Array.from(i).sort((n,s)=>n-s)}),Ue(async()=>{fetch("https://bot.laznikyiv.com/lklg/bot.log").then(i=>i.text().then(n=>{console.log(n.split(`
`))})),Ur({title:"Аналітика"});try{const[i,n]=await Promise.all([Bt.bookings.list(),Bt.guests.list()]);r.value=i.bookings,e.value=n.guests}catch(i){console.error("Failed to load data:",i)}finally{t.value=!1}}),(i,n)=>(ae(),le(qr,null,{default:q(()=>[me("div",Oi,[n[0]||(n[0]=me("p",{class:"comment"},"Аналітика",-1)),B(hi,{bookings:a.value,guests:e.value,placeholder:t.value},null,8,["bookings","guests","placeholder"]),n[1]||(n[1]=me("p",{class:"comment"},"Бронювання",-1)),me("div",ki,[B(fi,{bookings:a.value},null,8,["bookings"]),B(mi,{bookings:a.value},null,8,["bookings"]),B(gi,{bookings:a.value},null,8,["bookings"]),B(yi,{bookings:a.value},null,8,["bookings"]),B(li,{bookings:a.value},null,8,["bookings"]),B(_i,{bookings:a.value},null,8,["bookings"]),B(xi,{bookings:a.value},null,8,["bookings"]),B(Si,{bookings:a.value},null,8,["bookings"])]),n[2]||(n[2]=me("p",{class:"comment"},"Гості",-1)),me("div",Ii,[B(wi,{guests:e.value},null,8,["guests"])]),n[3]||(n[3]=me("p",{class:"comment"},"Бот",-1)),me("div",Ti,[B(Ai,{bookings:a.value},null,8,["bookings"]),B(Di),B(Li),B(Ci)])])]),_:1}))}},Yi=Pe(Ri,[["__scopeId","data-v-8d13c246"]]);export{Yi as default};
